# 移动端内测版本发布管理


## 关键词：移动端下载、统一版本管理渠道<a id="&#x51C6;&#x5907;&#x4E8B;&#x9879;"></a>

## 业务挑战

当业务进入测试阶段后，不同分支都会有大量新版本输出，需要开发、策划、美术等不同职能的同学进行版本测试。然而，不但各类内部测试用的版本依赖工程师们手动构建与下载分发，耗费人力，同时不同分支和版本的客户端包通过公司内各个大群传播，增添了信息安全与版本管理风险。

## BKCI优势

通过一个可嵌入各主流IM工具的“移动端版本体验”功能，人工上传、发布的操作被自动化的插件替代，并集成到流水线中。新的版本包会在构建完成后自动更新至企业微信应用，并向所有拥有测试权限的人员发送企业微信通知，节约了人力投入的同时，统一的版本管理途径也降低了测试期的版本的外泄风险以及管理成本。其特点有：

● 有权限保护的版本包下载与查看，降低版本安全风险

● 策划、美术均可操作的企业微信内一键出包，降低工程师投入及沟通成本

● 统一的版本进行管理渠道，避免版本混淆及错发

● 构建进程通知发送到企业微信


## 解决方案

部署前提

● 一个完成备案的域名和证书。

● 一台2核4G的服务器。

● 一个腾讯云COS bucket，存储应用和提供下载。

● 一个腾讯云CLB，提供前端访问的接入、负载均衡、DDoS防护等能力。

● *目前仅支持企业微信

1、配置BKCI流水线

![&#x56FE;1](../../../assets/scene-version-release-management-a.png)

配置ipa/apk安装包

 待上传的安装包路径：

● 从本次构建的路径下选择要上传的安装包。

● 支持ipa文件、apk文件和压缩包。

配置应用信息

● 应用名称：  版本体验上所展示的应用名称。当该配置项为空时，插件会自动获取ipa/apk包内置的应用名。

●  版本号： 版本体验上所展示的版本号。当该配置项为空时，插件会自动获取ipa/apk包内置的版本号。

●  应用描述： 该体验版本的详细描述。可以完全由业务方自定义。常用的描述有：应用的简介；版本的变更日志等等。

●  产品负责人： 支持从企业微信拉取通讯录，支持多选。

配置体验范围

 体验结束日期：超过这个日期后体验会自动过期并且不能再被下载。

 选择相对时间或绝对时间 

● 相对时间：流水线当前构建时间加上相对时间，单位（天），即为体验结束日期。

● 绝对时间：所选择的日期，即为体验结束日期        。

  体验人员： 

● 支持单个人员的选择。

● 支持按部分选择体验人员。

 配置通知方式

●  完成体验发布后，通过应用号发送通知。

●  通知人员支持选择应用服务人或体验人员。

2、从企业微信工作台中选择「版本体验」应用



![&#x56FE;1](../../../assets/scene-version-release-management-b.png)

3、选择需要体验的应用，点击「下载」可快速下载应用，ipa会提示跳转safari进行下载



![&#x56FE;1](../../../assets/scene-version-release-management-c.png)
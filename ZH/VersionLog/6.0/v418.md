# 版本详情

- 版本类型：beta
- 版本号：4.1.8
- 发布日期：2018-07-20

## 后台模块

| 子模块 | 版本号 | 备注|
| :-----: | :----: |:----: |
| gse|3.2.2 |管控平台 |
| cmdb|0.0.38|配置平台|
| job|4.2.3 |作业平台|
| open_paas|3.0.48 |集成平台|
| paas_agent|3.0.8 |集成平台|
| license|3.1.4 |证书服务|
| bkdata/dataapi|1.2.92 |数据基础模块 api 服务|
| bkdata/databus|1.2.23 |数据基础模块总线服务|
| bkdata/monitor|0.1.7|蓝鲸监控后台模块|
| fta|4.1.2 |故障自愈后台模块|
| bknetwork|3.6.0 |网络管理，可源科技提供|
| src|4.1.8 |整包版本信息|
|install|1.2.9|部署脚本|

## SaaS 应用
| SaaS | 版本号 | 备注|
| :-----: | :----: |:----: |
|bk_nodeman|1.0.67|节点管理|
|bk_fta_solutions|4.1.10|故障自愈|
|bk_monitor|1.4.26|蓝鲸监控|
|bk_log_search|1.1.24|日志检索|

## 版本日志

### 整体情况
- 【新增】规范化了变量名、方法名、字段等，统一冗余或者有歧义的命名
- 【变更】新品“节点管理”将替代“Agent 安装”
- 【说明】部署脚本、蓝鲸监控、故障自愈提供了更多的功能
- 【说明】"Agent 安装"必须升级到最新的 V1.0.52， 否则会造成“Agent 安装”SaaS 数据无法同步到“节点管理”上

### 部署脚本
- 【新增】V3.1 到 V4.1 升级方案
- 【修复】修复使用密钥场景下, 未带 ssh 端口的问题
- 【修复】修复特定场景下 cygwin 下的文件解压后权限异常的问题
- 【修复】单机部署时, 直连 gseagent 配置模板中的多个 zk 节点处理异常
- 【优化】gse 状态检查区分重要进程和不重要进程
- 【优化】bat 脚本更新, 配合 procinfo.json 的改动
- 【优化】单机部署 consul 配置优化. 不重复创建密钥

### 管控平台
- 【新增】windows agent 支持快照数据
- 【新增】AIX 目录规范化，支持“节点管理”SaaS web 端操作（仅限企业版）
- 【优化】gse_api 和 gse_task 接口及变量规范化
- 【优化】gse_api 和 gse_task 错误码规范化
- 【优化】agent 进程/脚本托管逻辑优化
- 【优化】修复 agent 重启时进程托管执行超时中止失效问题

### 配置平台
- 【变更】关联参数未清空问题
- 【删除】模型分类后一直 loading
- 【新增】接口，支持批量更新进程
- 【新增】主机查询支持自定义层级
- 【新增】新增查看删除历史的功能
- 【新增】国际化支持
- 【优化】微调导航二级菜单位置
- 【优化】更新 网络中间件模型字段
- 【优化】微调首页 UI
- 【优化】主机管理导航不排序
- 【优化】隐藏主机自定义层级筛选
- 【优化】修改关联关系判断
- 【优化】修改关联关系判断
- 【优化】自定义查询特殊模型字段参数处理
- 【优化】修复新增关联部分类型数据筛选无效的问题
- 【优化】修复主机查询部分类型数据筛选无效的问题
- 【优化】关联业务不可选择已归档业务
- 【优化】关联更新后重新加载列表
- 【优化】修复拓扑主机关联 UI 异常的问题
- 【优化】短字符正则去掉英文逗号
- 【优化】按钮样式调整
- 【优化】全局视图国际化
- 【优化】logo 调整
- 【优化】favicon 更换
- 【优化】国际化调整
- 【优化】关联样式调整
- 【优化】关联弹层样式调整
- 【优化】更新字符串正则
- 【优化】人员选择器优化
- 【优化】业务拓扑中节点增加查看功能
- 【优化】不是 chrome 浏览器会有明显提示
- 【优化】权限管理中如果没有设定角色，增加提示信息
- 【优化】进程搜索不支持模糊匹配
- 【修复】模型属性无法导出
- 【修复】批量修改时，没有勾选必填选项，不输入无法修改保存
- 【修复】模型字段 ID 为 0 的错误
- 【修复】v2 api 克隆主机未克隆模块关系
- 【修复】v2 api 根据用户角色获取业务，返回数据格式问题
- 【修复】短字符检验规则问题修复
- 【修复】表格尺寸切换未重置页码的问题
- 【修复】表格拖拽后无法排序的问题
- 【修复】拓扑关系修改后未重新刷新表格的问题
- 【修复】由于 hostserver 机构变更，动态分组不展示数据问题
- 【修复】兼容 api 支持通过参数获取主机数据
- 【修复】重构用户登录与用户权限校验， 实现接口与实现的分离
- 【修复】模型字段分组导入
- 【修复】关联搜索没有结果
- 【修复】修复 data status 状态查询
- 【修复】修复通用实例部分关联查询无效的问题
- 【修复】删除关联可以多次点击
- 【修复】关联页面拖拽节点时隐藏弹层
- 【修复】实例名过长时，实例名跟关联图标重叠
- 【修复】编辑模型分组，修改图标失败
- 【修复】默认的分组中文名称不支持修改
- 【修复】创建模型成功时，中文名称会带上括号
- 【修复】关联业务时，查看业务详情信息报错
- 【修复】关联详情弹框高度异常
- 【修复】修复特殊字符限制
- 【修复】进程的增删改查支持查看操作审计
- 【修复】主机的部分字段默认分组调整
- 【修复】资源池-主机导入的界面没有过场动画

### 作业平台
- 【新增】作业导入导出功能
- 【新增】拉取 db 账号别名列表 API
- 【新增】蓝鲸监控内置作业
- 【新增】新规范化 API 接口
- 【修复】同步新业务没同时创建默认账号的问题
- 【修复】上一版 SQL 初始化脚本数据库名错误的问题

### 集成平台
- 【变更】组件划分为 2 个目录 templates 和 apis，前者存放官方 demo api，用户可以直接将官方的 demo 拷贝到 api 下面使用；后者存放用户编码的 api。每次更新组件，templates 默认会被覆盖
- 【优化】组件加载顺序为：apis 到 templates
- 【优化】应用编码统一为 bk_app_code

### 数据基础模块
无

### Agent 安装
- 【变更】Agent 安装从当前版本开始，将停止更新与维护，推出新 SaaS“节点管理”
- 【新增】云区域下的 windows 支持无 cygwin 安装
- 【优化】优化部署流程

### 节点管理
新品推出，已包含当前“Agent 安装”的全部功能
- 【新增】覆盖 Agent 安装所有功能
- 【新增】云区域支持删除, 重命名操作
- 【新增】mini 手册页
- 【新增】增加批量编辑, 并自动根据操作系统分组功能
- 【新增】增加显示 Agent 版本号.
- 【新增】区分卸载与移除功能
- 【优化】优化步骤显示
- 【优化】优化不同操作系统的默认显示端口

### 故障自愈
- 【优化】告警源操作权限，仅管理员可操作，且对告警源的操作全业务生效
- 【优化】Open-Falcon 接入逻辑，实现 Open-Falcon 告警自动化处理
- 【优化】预置蓝鲸监控 CPU、内存告警的自愈方案
- 【修复】修复全业务套餐无法接收通知
- 【修复】获取故障备机套餐对接 CCV2 接口
- 【修复】获取故障备机套餐对接 CCV2 接口 fx1
- 【修复】告警源恢复正常时状态同步到 db 中

### 蓝鲸监控
- 【新增】 组件监控能力，支持 12 个组件：HAProxy、Weblogic、Memcached、Oracle、SQL Server、RabbitMQ、Zookeeper、Nginx、Apache、Tomcat、Redis、MySQL
- 【新增】 组件导入，支持 Prometheus Exporter 导入，实现指标采集、自动出图、监控策略设定.
- 【新增】 进程资源监控，支持对单个进程占用的 CPU、物理内存、虚拟内存、文件句柄数等指标做监控.
- 【新增】 脚本采集，支持使用 BASH 采集指标
- 【删除】自动处理功能。请用户将自动处理策略迁移至故障自愈 SaaS，故障自愈 SaaS 有强大的自愈及防护能力。
- 【优化】基础性能指标的存储从 MySQL 替换为 InfluxDB
- 【优化】 仪表盘呈现效果，支持大屏监控
- 【优化】 整体页面交互，加快访问页面的时间
- 【修复】修复 migrate_lock 执行异常后未清理的问题
- 【修复】升级用户老的监控配置项部分不生效的问题
- 【修复】低版本浏览器无法打开自定义组件导入页面的问题修复

### 日志检索
无

## 更多操作
- 当前 [版本反馈](http://bk.tencent.com/s-mart/community)
- 客服 QQ：800802001
- 蓝鲸社区版交流 1 群：495299374
- 客服邮箱：contactus_bk@tencent.com

# 版本详情

- 版本类型：release
- 版本号：3.1.7
- 发布日期：2017-11-18
- 版本类型：release
- 版本号：3.1.6
- 发布日期：2017-10-20
- 版本类型：release
- 版本号：3.1.5
- 发布日期：2017-09-11



## 后台模块

| 子模块 | 版本号 | 备注|
| :-----: | :----: |:----: |
| gse|3.1.10 |管控平台 |
| cmdb|3.1.8|配置平台|
| job|3.1.21 |作业平台|
| open_paas|3.0.31 |集成平台|
| paas_agent|3.0.8 |集成平台|
| license|3.1.2 |证书服务|
| bkdata/dataapi|1.0.13 |数据基础模块 api 服务|
| bkdata/databus|1.0.10 |数据基础模块总线服务|
| bkdata/monitor|0.0.19|蓝鲸监控后台模块|
| fta|3.1.18 |故障自愈后台模块|
| src|3.1.7 |整包版本信息|
| install|1.0.15|部署脚本|

## SaaS 应用

| SaaS | 版本号 | 备注|
| :-----: | :----: |:----: |
|bk_agent_setup|1.2.0|Agent 安装|
|bk_fta_solutions|3.1.16|故障自愈|
|bk_monitor|1.0.33|蓝鲸监控|
|bk_log_search|1.1.6|日志检索|
|bk_gsekit|1.0.0|GSEKit|

## 版本日志

### 整体情况

- 【优化】代码质量
- 【新增】推出新品“故障自愈”

### 部署脚本

本次对蓝鲸智云体系内的平台进行了部署上的解耦，各模块支持独立部署和升级；服务配置进行了统一的规范化，每个公共服务节点都具备自检和服务检查/启动自动化脚本，使用户能够更方便的管理和运维整个蓝鲸平台。

### 管控平台

- 【新增】zookeeper 增加 ACL 认证，更安全
- 【优化】针对用户多 IP 环境支持 agent 手动配置方案
- 【优化】linux 环境下解决偶现中文乱码问题
- 【优化】windows2003 中文乱码问题

### 配置平台

- 【新增】增加故障机模块，以支持故障自愈场景
- 【新增】可在线修改主机自定义属性的值
- 【新增】新加集群新增、修改、删除、修改自定义属性的 API
- 【新增】增加更多的业务人员角色
- 【优化】主机、模块等相关 API
- 【优化】动态分组预览功能及相关 API
- 【优化】可以根据用户身份获取业务列表信息
- 【优化】标记为停运状态的业务将在业务列表相关 API 中隐藏
- 【优化】资源池管理页面分配至的逻辑
- 【修复】快速搜索结果出现多条记录时的异常情况
- 【修复】在平台注销后打开配置平台需重复登录
- 【修复】部分页面显示的样式问题

### 作业平台

- 【新增】默认业务/默认执行账户设置
- 【优化】全新样式，提升交互体验
- 【优化】本地文件上传限制从 500MB 调整为 2GB
- 【优化】执行类 API 调用限制从 3000 上调至 5000
- 【优化】安全特性，管理员账号不再拥有操作所有业务的权限
- 【优化】作业平台不再使用操作系统时区，强制为东八区
- 【修复】执行账户名支持连接符
- 【修复】复制 IP 组件替换，不再使用 Flash 插件（修复 Chrome 禁用 Flash 后导致该功能失效）
- 【修复】脚本超时时间最长为 20 小时
- 【修复】全局变量的值支持$符号
- 【修复】防 CSRF 跨站攻击导致偶现需重新登录会话

### 集成平台

- 【新增】微信接口，对接了微信公众号，企业微信的消息发送接口，用户只需要配置必要的微信账号信息，即可向指定的微信用户发送微信消息。
- 【新增】短信接口，对接了腾讯云的短信消息发送接口，用户只需要配置腾讯云上的账号信息，即可向用户发送短信。
- 【新增】“工作台”展示 APP 简介
- 【新增】footer 添加“青藤云安全”标识
- 【新增】用户弱密码识别
- 【新增】用户管理角色为：普通用户、开发者、管理员
- 【新增】组件通知接口添加短信（腾讯云）接入方案
- 【新增】组件通知接口添加微信公众号接入方案
- 【优化】按照应用来源，将“内置应用”更名为“S-mart”应用
- 【优化】“S-mart 应用”内 yml 文件的内容优化
- 【优化】进一步做了安全认证
- 【修复】文档描述信息

### 数据基础模块

无

### Agent 安装

- 【新增】非 root 用户安装 Agent 支持（非 root 账户需要 sudo 权限）
- 【优化】监控未安装 Agent 点击直接跳转 Agent 安装 app（IP 传参）

### 包管理

- 【优化】包管理后台的部分功能点，使平台系统更流畅。

### 开发样例

- 【新增】功能开关样例，便于开发者对功能做限制

### 故障自愈

它是一款实现服务器故障自动处理的解决方案，提升企业服务可用性和降低故障处理的人力投入。通过自动化处理来节省人力投入，通过预定的恢复流程让恢复过程更可靠，通过并行分析达到更快的故障定位和恢复，最终减少业务损失的风险。一句话概括：实时发现告警，预诊断分析，自动恢复故障，并打通周边系统实现整个流程的闭环。

### 蓝鲸监控

- 【新增】主机详情页的指标时间段展示支持跨多天查询
- 【新增】IP 填写框新增支持逗号、分号和换行
- 【优化】优化缓存更新机制提升页面加载性能
- 【优化】优化避免脏数据导致监控图表展示异常的问题
- 【优化】“近 24 小时”的时间范围展示周期粒度为 5 分钟
- 【优化】取消网卡设备名的 eth 开头设定，只保留屏蔽本地回环
- 【优化】多网卡性能指标在同一图表里呈现
- 【修复】采集主机数据异常时导致前台加载出错的问题
- 【修复】由于 csrf 导致权限拉取错误的问题
- 【修复】自定义监控的统计方式展示问题
- 【修复】自动处理的参数问题导致多节点作业执行失败的问题
- 【修复】首页关注图表拉取告警失败的问题

### 日志检索

- 【新增】根据用户身份进行业务权限限制
- 【优化】Elasticsearch 2.x 到 5.x 整体升级
- 【优化】cgi 权限限制
- 【修复】优化日志下载功能

## 更多操作

- 当前 [版本反馈](http://bk.tencent.com/s-mart/community)
- 客服 QQ：800802001
- 蓝鲸社区版交流 1 群：495299374
- 客服邮箱：contactus_bk@tencent.com

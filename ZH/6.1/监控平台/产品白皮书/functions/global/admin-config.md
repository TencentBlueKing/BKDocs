# 全局配置

全局配置是影响整个监控系统行为的，不区分业务。

## 前置步骤

**导航路径**：导航  →  系统管理  →  全局配置

> **注意**：只有管理员才有权限进行设置。

### 全局配置页面

![-w2021](media/15772819609704.jpg)

#### 数据保存周期

数据保存周期设置完成后，是每天的凌晨 4 天进行生效。保存的时间越长，对存储的资源要求越高。注意资源的使用。

#### 图表水印

默认是开启图表水印的，页面上的图标将带上当前用户名的水印，关闭后整站的水印都会关闭。

#### 告警通知渠道

通知渠道是来自 ESB 中的通知方式，[ESB 的通知方式添加](../../guide/notify_setting.md)

配置告警组页面上允许选择的通知方式，但不影响已配置的告警组。["\__all__"] 代表全部，sms 短信，weixin 微信，voice 电话，mail 邮件。

#### 全局磁盘类型屏蔽配置

若配置了磁盘只读和磁盘写满的策略，可通过该配置项屏蔽指定类型的磁盘的告警。

配置方法 `["iso9660", "tmpfs", "udf"]`

#### 额外通知方式-消息队列设置

设置了消息队列后在策略配置的时候可以选择哪些策略触发的告警信息是否要进入消息队列，方便基于告警事件进行二次开发的需求。

配置方法： `"redis://:${password}@${host}:${port}/${db}"`

如： `"redis://:ycm%2C2rRn4A@10.0.1.10:6379/15/bk_monitor_queue"`

### 更多 admin 配置方法

1. 访问  `${BK_PAAS_HOST}/o/bk_monitor/admin/bkmonitor/globalconfig/` ，进入 admin 页面
点击看原图

![-w2021](media/15746678905653.jpg)

2. 点击需要修改的配置，进入配置页面

3. 配置信息根据实际需要填写，填写的文本需要严格符合 JSON 格式，数据类型与填写的文本必须匹配
支持的数据类型：
    - 整数。例如：1234
    - 字符串(必须带上双引号)。例如："xxxxx"
    - 布尔值。例如：true
    - JSON。任何符合 JSON 格式的文本
    - 列表。例如：["test", 321]
    - 字典。例如：{"key": "value"}

4. 修改完配置之后，点击右下角保存。若返回校验失败的报错，则需要检查配置是否符合 JSON 格式。然后重新进入页面填写提交。不要直接在原页面修改保存

> **警告**：由于缓存机制，配置将在修改后的 5 分钟内生效。


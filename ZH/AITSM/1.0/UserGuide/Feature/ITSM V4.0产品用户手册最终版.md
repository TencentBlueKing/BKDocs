# 产品简介

## 产品概述

ITSM（ITServiceManagement）是指 IT 服务管理，是一种管理和提供 IT 服务的方法和实践。ITSM 的目标是通过有效的 IT 服务管理，提供高质量的 IT 服务，满足用户的需求和期望，同时提高 IT 部门的效率和效益。

ITSM 的核心理念是将 IT 视为一种服务，将用户视为客户，通过建立和维护良好的服务管理流程，提供稳定、可靠、高效的 IT 服务。ITSM 强调持续改进和不断优化服务管理流程，以适应不断变化的业务需求和技术环境。

ITSM 产品是一款面向企业所有部门、所有人员的服务管理软件，提供服务门户配置、服务流程定义以及服务目录视图等核心模块，支持各部门独立运行和跨部门协作，使得企业管理工作更加规范和敏捷，从而提升企业的工作效率和工作质量。

## 术语解释

**门户**

ITSM 提供门户配置功能，可以支持创建多个门户。"多门户"是指为不同用户群体或角色提供定制化访问入口的概念。每个门户都是为特定的用户群体设计的，以满足他们的特定需求和偏好。多门户的目的是提供更加个性化和高效的用户体验，确保用户能够轻松访问与他们相关的信息和服务。

**表单模型**

表单模型是具体业务场景的一个基础表，在设计流程之前，可以创建一个表单模型，把某一类业务的通用字段配置在这个表单模型中，后续很多功能的配置，都依赖于这个业务模型中的字段。定义一个清晰的表单模型，不仅能提升流程配置的效率，减少各个功能配置的重复性工作，还有助于后期的相关数据统计，只有结构正确，才能保证复用性和扩展性。

**数据表**

数据表模块用于维护一些和 ITSM 相关的业务数据，以便于在流程中使用这些数据

**决策表**

决策表是一种结构化的分析方法，用于将复杂的逻辑条件用清晰的表格形式展现出来，便于统一维护和使用。

决策表用于实现流程过程中的一些自动化决策过程，有助于提升服务效率，提高服务质量。如在事件管理场景中，基于事件分类自动匹配处理人的场景，就可以通过决策表提前维护好事件分类和处理人的对应关系，在流程中实现自动化分派。

**触发器**

流程触发器是在工作流中自动执行特定操作的机制。当特定事件发生或条件满足时，流程触发器会被激活，从而启动一个或多个相关的动作。这些动作可能是发送通知、更新数据库记录、创建新任务等。

**动作**

动作管理模块用于统一管理和第三方系统的对接。在流程中通过自动节点或通过触发器模块实现一些自动化场景。

**数据字典**

数据字典用于维护工单中选择类字段的数据源，把具有复用性的数据在数据字典进行统一维护管理（如事件分类、事件来源等），保证数据的标准化和一致性，并且可以减少管理工作量，提高流程设计效率。

# 工作台

## 概述

工作台是一个集成化的解决方案模块，旨在帮助技术团队更高效地管理和支持 IT 服务。

### 2.1.1 工作台简介

通过工作台的使用，可以优化团队协作、提高服务响应速度、改进问题解决率和提升用户体验。同时，工作台提供了一系列的功能模块，包括事件管理、请求管理、变更管理、报表分析等，以支持技术团队在 IT 服务管理过程中的各项工作。

**业务目标：**

- 提高服务响应速度：工作台通过将事件、请求和变更管理的功能集成在一个平台上，帮助技术团队更快速地响应用户的需求和问题。
- 提升问题解决率：工作台提供了工单数据查询、分析和请求服务的能力，帮助技术团队更好地跟踪和解决问题，从而提高解决问题的准确性和效率。
- 改进用户体验：工作台提供直观易用的界面，帮助用户更轻松地发起请求和获取服务，提升用户满意度和体验。

### 2.1.2 工作台模块能力

**A 区域：个人中心**

提供用户个人信息的展示及运维工具单点登录功能。支持用户在工作台中了解自己的个人信息；同时，直接登录相关运维工具，无需再进行繁琐的重复登录操作。

**B 区域：服务待办统计及快速提单**

个人待办工单：提供个人待办工单报表分析能力，包括请求、事件和变更的总数、预警数量和超时数量等信息。用户可以一目了然地了解个人工作负荷情况，便于合理安排工作优先级。

快速提单：用户可以通过工作台快速创建新的工单，包括请求、事件和变更的提单，方便用户及时记录和处理工作请求。

**C 区域：工单查询**

提供了待办、超时、预警工单的查询功能。用户可以根据不同的状态和条件（如设定超时时间），查看自己正在处理的待办工单，方便追踪和及时处理相关事务，及时采取措施处理，确保服务质量和用户满意度。

## 2.2 配置工作台

### 2.2.1 安装相关服务应用

安装请求、事件和变更等应用后才可在工作台实现【服务待办统计及快速提单】的相关能力。

**前提条件：**

请确认您拥有“平台管理-应用中心”模块的功能权限，否则将无法安装相关应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

示例：登录 IT 服务管理中心后，进入“平台管理-应用中心”模块，找到“请求管理”应用，点击“安装”即可安装请求管理应用，安装成功的请求管理应用可以在“运行管理”菜单下查看到。

点击请求管理应用的“详情”按钮可以查看该应用插件的功能简介、相关资料、依赖说明和关联应用等信息。

# 工单中心

## 概述

工单中心集合了用户相关的所有工单，支持创建工单、查询工单、处理工单等，同时还支持自定义工单分组。

工单中心的整体布局设计如下：

**创建工单**

在工单中心创建工单的入口，点击后可以选择某个流程创建工单。

**工单分组**

工单分组列表区域，默认有我的全部、我的待办、我的经办、我的草稿、我的预警、我的挂起几个内置分组列表，同时支持自定义分组，可以根据场景进行分组条件的配置，创建新的工单分组列表。

**筛选工单**

工单基础筛选区域，在工单列表的表头下面，支持按照对应的表头字段对工单进行查询。

**工单列表**

展示对应工单分组下的全部工单，点击单号可以进入工单详情页，查看工单详细信息或对工单进行处理。

**工单列表操作**

支持对工单的一些其他操作，如批量处理、工单导出。

## 创建工单

工单中心提供了创建工单的入口，与服务目录不同，工单中心的创建工单不是选择的某个服务创建，而是直接选择某个流程进行创建工单。
进入工单中心，点击左上角的创建工单按钮
打开创建工单的页面，顶部的分类对应的是所属应用，侧边的分类对应的是流程类型，选择某个流程，进入提单页面
填写表单信息后点击”提交“即可。
同时还提供了保存模板和保存草稿的功能
- 保存模板：将当前所填信息保存为模板，下次使用相同的流程提单时，选择使用模板填写，即可快速填写表单。
- 保存草稿：当前表单内容未填写完成时，可以点击”保存草稿“，将所填内容存到草稿箱，下次可以在”我的草稿“列表中，打开对应工单填写完成后提交
注意：请务必在流程发布前到“平台管理/全局配置/流程类型”处进行对应流程类型的工单编号前缀设置，否则会提单失败

## 工单分组

工单中心的左侧区域对工单进行了分组归类，用户可以快速定位到相应的分组进行工单的查看，除了提供内置的常用分组外，产品还提供了自定义分组的能力，用户可以根据场景进行分组条件的配置，创建新的工单分组列表。

### 内置分组

产品当前内置的分组有：我的全部、我的待办、我的经办、我的草稿、我的预警、我的挂起

- 我的全部：展示我有查看权限的所有工单。
- 我的待办：展示待我处理的工单，即当前处理人中包含我的。
- 我的审批：展示所有待我处理的审批节点的工单
- 我的申请：展示所有我发起的工单，即提单人是我的。
- 我的经办：展示所有我处理过的工单。
- 我的关注：展示所有我所关注的工单
- 我的草稿：展示我创建工单时保存为草稿的工单，打开具体的草稿单再次编辑后即可提交。
- 我的挂起：展示和我相关的所有工单中，状态为”挂起“的工单。

（出于性能考虑，当前仅对含有数据库索引的分组进行工单数量统计）

### 自定义分组

提供自定义工单分组的能力，可根据场景进行分组条件的配置，创建新的工单分组列表，自己自定义创建的分组，仅自己可以看到
点击工单分组的设置图标，进入自定义分组管理页面
点击工单分组的添加按钮，创建新的分组目录
在对应的分组目录下点击”新增分组“按钮，进行新分组的创建，创建完成后启用分组，即可在工单中心的分组列表中看到所创建的分组
注意：后续在工单导出和列表展示字段配置时，内置的分组只能选择基础字段，如果是自定义的分组，分组范围是单个流程或者单个表单模型的，就可以选择流程中自定义的或模型中定义的字段。

## 工单详情

在工单列表中点击某个要查看的工单单号，即可进入工单详情页查看工单的详细信息。
工单打开后在工单中心上方以页签的形式展现，可以同时打开多个工单切换查看。单击工单的页签上的，可以关闭当前工单详情页面，单击页签栏最右边的关闭，可以关闭当前打开的所有工单
工单详情内容包含工单的基本信息、工单表单信息、流程图、流转日志、工单评论、触发器、附件、关联单、下面进行详细的介绍。

### 流程图

在工单详情页面点击可以查看工单关联的流程图及当前的流转进度
在流程图中：
- 已经完节点：节点卡片为彩色并且可以看到处理人，节点连接线条为蓝色，如图中提单节点
- 当前进行中节点：节点卡片外有一圈蓝色线框，卡片为彩色并且可以看到处理人，节点连接线条为蓝色，如图中审批节点
- 未到达节点：节点卡片为灰白色，节点连接线条为灰色
- 流程图页面支持流程图的放大、缩小、复位以及全屏展示。
- 流程图页面支持流程图的缩小、放大、复位以及全屏展示。
- 鼠标悬停流程图中的节点，展示处理人信息（具体展示的信息可在平台管理-基础配置中进行配置），如下图所示：

### 流转日志

在工单详情的右边栏，展示了工单的全部流转日志，可以看到流转时间、节点、操作、操作人以及字段变更信息。

### 工单评论

在工单详情的右边侧边栏，点击”评论“页签，即可查看、发布或回复评论。工单评论支持粘贴图片、上传文件以及@其他用户，被@的用户还可以收到评论通知。

### 触发器

在工单详情的右边侧边栏，点击”触发器“页签，即可看到该工单绑定的相关触发器的执行记录和详细信息，包括执行时间、状态、执行日志
- 触发器列表
- 执行详情

### 附件

在工单详情的右边侧边栏，点击”附件“页签，即可看到该工单相关的所有附件，包括评论中的附件和表单附件类型字段中上传的附件，都会统一展示在这里。
注：评论或表单字段中的附件被删除后，附件列表中的会同步删除

### 关联单

在工单详情的右边侧边栏，点击”关联单“页签，即可看到该工单相关的关联单据。
关联单据分两类，一类是在关联单列表中直接点击添加的关联单，另一类是通过流程中配置的关联单按钮创建的关联单（如事件转问题，详见流程设计模块文档）。

### 关注人

工单关注人用于展示所有关注了该工单的用户。
工单关注人分两种场景：
1.  在工单处理过程中，希望可以设置重点关注的用户，以便他们能同步了解工单的进展。
这种情况下具备工单查看权限的用户可以添加其他用户作为工单关注人，添加之后就会自动授予关注人工单查看的权限。
添加工单关注人之后可以填写通知信息，工单关注人可以收到该通知（前提是需要手动去通知管理模块配置并启用工单关注通知）
2、希望可以主动关注某工单，并且能可以查看关注的工单列表，以便于查看跟进。
这种场景下点击工单标题旁边的关注工单图标即可关注当前工单
所有关注的工单可以在“我的关注”这个工单列表中查看

### 审批任务

当工单中拥有审批节点，需要进行对应的审批操作时，会将所有需要审批的任务信息展示在“审批任务”侧边栏中

审批人字段在审批前显示为流程中设置的审批人，在审批后显示实际的审批人

审批任务按照节点预定的先后顺序进行展示，其中审批任务状态说明如下

等待：该审批任务还未开始

运行中：该审批任务已经开始，等待审批人审批

同意/拒绝：该审批任务已经完成，显示审批结果以及审批信息字段

撤销：审批任务被撤销

若当该审批任务是通过“加签”方式产生的，并且该任务状态为“等待”/“运行中”时，则可以由审批任务节点中的审批人以及管理员通过点击“撤销任务”按钮撤销该审批任务，撤销后会在对应的审批节点中生成对应的日志

## 处理工单

### 处理操作说明

点击单号进入工单详情页之后，工单右上角有当前工单支持的所有操作按钮，可根据实际情况对工单进行相应的操作

各操作说明如下：

1、手动节点：提交、更新、保存、认领、转单、退回

2、审批节点：同意、拒绝、更新、保存、转单、加签、退回

3、自动节点：重试、手动执行

4、其他操作：撤回、挂起/恢复、关闭、终止、重新打开、自定义按钮（关联单）

<div class="joplin-table-wrapper"><table><tbody><tr><td><p><strong>操作</strong></p></td><td><p><strong>操作说明</strong></p></td></tr><tr><td><p>提交</p></td><td><p>提交当前表单信息（手动节点才有），点击后流程继续流转。</p><p>当表单信息确认填写完成后，可以进行提交，让流程继续往下流转。</p></td></tr><tr><td><p>更新</p></td><td><p>更新当前表单信息，和提交不同，点击后只是更新表单信息，流程不会继续往下流转。并且更新不会校验必填项</p><p>当工单处理人只是填写了部分信息，想要更新给用户看，但暂不需要提交至下一节点时，可以点击更新</p></td></tr><tr><td><p>保存</p></td><td><p>保存当前任务中填写的内容，下次进来继续填写。保存的内容并不会被正式更新，有处理权限的用户才可见。</p></td></tr><tr><td><p>认领</p></td><td><p>当工单被分派到某一范围内的用户时，用户可以主动认领当前任务。对于启用了认领功能的节点，要认领后才可以进行处理</p></td></tr><tr><td><p>转单</p></td><td><p>当工单处理人无法亲自处理工单时，可以将工单转派给他人处理</p></td></tr><tr><td><p>退回</p></td><td><p>工单当前节点的处理人对工单历史节点的处理情况有异议时，可将工单回退给历史节点处理人进行处理。</p></td></tr><tr><td><p>审批</p></td><td><p>审批节点的审批按钮有”同意“和”拒绝“，点击同意和拒绝都会提交当前表单信息，提交后流程继续往下流转</p></td></tr><tr><td><p>加签</p></td><td><p>为当前审批节点添加审批人（审批节点才有）</p><p>当前审批任务需要其他成员审批时，可以进行加签操作，加签支持前加签和后加签。</p><ul><li>前加签：被加签人审批后，我才可以审批</li><li>后加签：我审批之后，被加签人才可以审批</li></ul></td></tr><tr><td><p>重试/手动执行</p></td><td><p>当自动节点的自动任务执行失败时，可以点击重试或手动执行</p><ul><li>重试：再次触发自动任务的执行</li><li>手动执行：自动执行始终无法成功时，可以使用手动执行，自行填写输出参数后提交</li></ul></td></tr><tr><td><p>撤回</p></td><td><p>工单流程中上一个历史节点的处理人需要重新处理历史节点工单时，可以进行撤回。可撤回的前提是下一节点还未处理，若下一节点已经处理，就不可以进行撤回。</p></td></tr><tr><td><p>挂起/恢复</p></td><td><ul><li>挂起：当工单暂时不需要处理工单时，可将选择挂起工单。</li><li>恢复：挂起的工单需要继续处理时，可以点击恢复工单</li></ul></td></tr><tr><td><p>关闭</p></td><td><p>若工单内容已经被提前解决，不需要按照既定流程继续跑完时，可提前关闭工单。关闭工单后，工单则结束，工单状态为“已完成”，不再继续往下走。</p></td></tr><tr><td><p>终止</p></td><td><p>若工单内容由于某些原因不需要完成，可以进行终止。终止工单后，工单则结束，工单状态为“终止”，不再继续往下走。</p></td></tr><tr><td><p>重新打开</p></td><td><p>工单流转到结束状态后，因为某些原因需要重新流转，可以进行重新打开。重新打开后工单从提单节点之后重新开始流转。</p></td></tr><tr><td><p>催办</p></td><td><p>当觉得处理进度不达预期时，可以点击催办，催促处理人，点击后处理人会收到工单催办通知。</p></td></tr><tr><td><p>自定义按钮（关联单）</p></td><td><p>通常用于事件转问题，事件转变更等场景，需要将当前事件单据转建为问题单，希望自动填入事件单中的相关信息，就可以在流程自定义按钮下配置关联单的按钮。</p></td></tr></tbody></table></div>

### 批量处理

在我的待办列表中，点击右上角批量处理的按钮，可以对工单进行批量处理

选择要批量处理的工单，点击确认

系统会按照流程版本和当前节点对工单进行分批（只有处于同一流程版本同一节点的工单才可以批量处理），选择对应的批次点击批量处理

工单详情内容按照第一个勾选的工单内容展示，处理之后所填值会自动同步至所选的其他工单

### 快速审批

“我的审批”工单分组中包含了所有当前用户的处于审批节点的待办，在列表上可以直接点击“同意”或“拒绝”按钮进行快速审批

点击后填写审批意见提交即可，同时也可以进行批量审批，操作同上面批量审批功能

## 工单其他操作

### 查询工单

工单查询支持基础查询和高级查询两种方式

#### 基础查询

用户在工单列表中，点击“基础查询”，可以对工单进行基础查询，若查询的条件不在列表中，可以通过配置列表字段让其展示

#### 高级查询

用户在工单列表中，点击“高级查询”，可以对工单进行高级查询，支持组合条件的查询。

- 筛选范围不限时：查询条件只能选择系统字段
- 筛选范围是单个流程或者单个表单模型的，就可以选择流程中自定义的或模型中定义的字段进行查询

#### **保存查询条件**

对于一些经常使用的查询条件，可以保存下来方便下次进行快捷筛选，提高工单查询的效率。

在工单列表的左上角，可以选择已保存的筛选条件进行快速查询。

### 自定义列表展示字段

如果需要查看的字段没有在工单列表中展示出来，可以通过点击列表右边的按钮来自定义配置展示的字段，还可以拖拽已选字段前的图标，对字段进行排序。

内置的分组只能选择基础字段，如果是自定义的分组，分组范围是单个流程或者单个表单模型的，就可以选择流程中自定义的或模型中定义的字段

### 工单导出

工单导出是指把工单数据导出为 Excel，支持导出系统字段和表单中的字段。内置的分组只能选择基础字段，如果是自定义的分组，分组范围是单个流程或者单个表单模型的，就可以选择流程中自定义的或模型中定义的字段。详细请参考上一节“自定义列表展示字段”的说明。

在列表右上角点击“导出”按钮

选择要导出的工单，点击确认

选择要导出的字段，同时可以在右侧拖拽字段进行排序，确认后导出即可

### 工单标签

工单标签是指对工单打上标签进行归类，以便于后续工单的查询统计

在工单详情标题旁边，对工单进行标签的添加。所有具备工单查看权限的用户都可以对工单添加标签，添加的标签是所有人都可以看到的，不做用户隔离。

# 运行管理

## 请求管理

### 请求管理概述

请求管理模块支持请求管理流程，使 IT 组织能够有效地路由和支持所有标准和非标准运营服务请求。

#### ITIL 中的请求管理

ITIL 中的请求管理主要包括以下几点：

**定义：**

请求管理是负责处理服务请求的过程。服务请求具有规模小、成本低、执行频繁和低风险的特点，也就意味着最好使用单独的流程处理，避免这些请求阻碍和堵塞正常的事件和变更管理流程。

**业务目标：**

- 通过高效和专业的处理所有服务请求维持用户和客户的高满意度。
- 为用户提供一个渠道，用来请求和接收已经存在预定义授权流程的标准服务。
- 为用户和客户提供关于服务可用性和获取服务方式的信息。
- 协助处理咨询、投诉或建议。

#### 请求管理模块能力

**功能描述：**

用于管理用户对 IT 系统和服务的请求，请求通常仅影响提出请求的人或一组下属员工。例如，密码重置、账号权限申请、个人 PC 更新和新员工入职等请求。

**模块的作用：**

请求管理模块使企业员工能够提高自身的生产效率或业务服务和产品的质量，也有助于降低提供服务的成本，以及提高组织服务的控制水平和交付请求的数量。

### 配置请求管理流程

#### 安装请求管理应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装请求管理应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“请求管理”应用，点击“安装”即可安装请求管理应用，安装成功的请求管理应用可以在“运行管理”菜单下查看到。

点击请求管理应用的“详情”按钮可以查看该应用插件的功能介绍、插件资料、依赖说明和关联插件等信息。

#### 请求表单模型

**前提条件：**

请确认您拥有“运行管理-请求管理-请求表单模型管理“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-请求管理-请求表单模型管理”模块，可以看到该模块中已经内置了一个请求管理表单模型，该内置的表单模型中已经提前预设了请求管理流程中可能会应用到的字段，内置的表单模型不支持删除。除了使用内置的请求表单模型以外，支持新增自定义的表单模型。

除了使用内置的请求表单模型以外，支持新增自定义的请求表单模型，新增请求表单模型的操作同“平台管理-表单管理-表单模型”。新增的表单模型在流程使用时将会默认继承内置的表单模型中的字段。

#### 请求数据字典

**前提条件：**

请确认您拥有“运行管理-请求管理-请求数据字典“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-请求管理-请求数据字典”模块，可以看到该模块中已经内置了部分请求管理数据字典，内置的数据字典会作为内置请求表单模型的数据源。这些内置的数据字典不支持删除。可以对内置的数据字典进行编辑，编辑时，可以修改内置数据字典的名称、描述等基础信息，内置的选项也可以进行修改、删除。

除了使用内置的请求数据字典以外，支持新增自定义的数据字典，新增请求数据字典的操作同“平台管理-全局配置-数据字典”。

#### 请求流程类型

**前提条件：**

请确认您拥有“运行管理-请求管理-请求流程类型“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-请求管理-请求流程类型”模块，可以看到该模块中已经内置了“请求管理”的流程类型，内置的流程类型不支持删除。

除了使用内置的流程类型以外，支持新增自定义的流程类型，新增请求数据字典的操作同“平台管理-全局配置-流程类型”。

#### 请求流程设计

**前提条件：**

请确认您拥有“运行管理-请求管理-请求流程设计“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在请求流程设计功能板块中，您可以新增请求流程，新增流程时，需要选择流程绑定的表单模型及流程类型，可选范围分别为“请求表单模型”及“请求流程类型”中的有效数据。

新增流程后将进入表单设计页面，在”字段类型“中选择基础的字段添加到表单中。

完成表单设计后，进入请求流程设计页面完成请求流程的编排，并且完成流程设置后可以对编排好的流程进行发布，流程编排的操作同“平台管理-流程管理-流程设计”。

流程编排成功并且启用后，有权限的用户可以点击“运行管理-请求管理-创建工单”可以找到编排成功的流程发起工单。

#### 请求工单

**前提条件：**

请确认您拥有“运行管理-请求管理-请求工单“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在该功能界面，用户可以查看到所有请求管理的工单，可以通过预先内置的工单分组查看当前用户待办、经办、申请的工单等。

也可以点击工单分组设置用户自己的工单分组。

### 使用请求管理流程

#### 提交请求单

#### 处理请求单

请求工单的处理人可以通过以下两种渠道进行请求单的处理。

**通过请求管理应用处理工单：**

用户需要具有“运行管理-请求管理-请求工单”功能的权限。进入该功能界面后，可以查看到请求管理的工单信息，进入“我的待办”中可以查看到待我处理的工单列表。

**通过工单中心处理工单：**

请求单处理人可以点击系统顶部的“工单中心”进入该功能界面，进入“我的待办”中可以查看到待我处理的工单列表。

## 事件管理

### 事件管理概述

事件管理模块，能够提供全面的事件管理功能，使 IT 组织能够尽快恢复正常的服务运行，最大限度地减少对业务运营的不利影响。

事件管理使 IT 组织能够对各种类型的事件（例如服务不可用性或性能问题以及硬件或软件故障）进行分类和跟踪，并确保事件在商定的服务级别目标内得到解决。

#### ITIL 中的事件管理

ITIL 中的事件管理目标是尽快恢复正常的服务运作，以尽量减少事件的负面影响，在 ITIL 中指出，事件管理对业务来说非常重要，因此相对于服务运营的其他领域，事件管理通常更容易展示其价值。

价值包括：

- 发现和解决事件的能力，从而降低服务性能下降或不可用的时间，提高服务可用性。
- 使 IT 活动与业务优先事项保持一致。
- 识别服务的潜在改进内容，以及额外的服务或培训需求。

#### 事件管理模块能力

- 记录和跟踪：事件管理模块支持记录和跟踪与企业业务相关的单个或一组事件，使组织能够对事件进行分类，并跟踪解决过程。
- 事件升级和重新分配：适当的人员可以升级和重新分配事件，还可以根据需要将事件升级为更高优先级，确保事件能够迅速修复，以符合服务合同的约定条款。
- 事件解决：事件管理旨在尽快恢复正常的服务操作，并尽量减少对业务运营的不利影响，从而确保保持最佳的服务质量和可用性水平。
- 事件通知：事件管理包括服务台直接通知用户，或通过事件管理和接口进行通知事件。
- 事件报告：支持人员可以从巡检和告警中发现并主动报告和记录事件，并适时通知服务台。

### 配置事件管理流程

#### 安装事件管理应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装事件管理应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“事件管理”应用，点击“安装”即可安装事件管理应用，安装成功的事件管理应用可以在“运行管理”菜单下查看到。

点击事件管理应用的“详情”按钮可以查看该应用插件的功能介绍、插件资料、依赖说明和关联插件等信息。

#### 事件表单模型

**前提条件：**

请确认您拥有“运行管理-事件管理-事件表单模型管理“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-事件管理-事件表单模型管理”模块，可以看到该模块中已经内置了一个事件管理表单模型，该内置的表单模型中已经提前预设了事件管理流程中可能会应用到的字段，内置的表单模型不支持删除。

点击“编辑”内置的表单模型可以查看到内置表单模型中内置的字段列表。内置的字段不支持删除，编辑内置字段时不支持修改字段的类型和标识。除了内置字段以外，还可以在内置表单模型中新增其他的字段。

事件管理内置字段如下表所示：

|     |     |     |
| --- | --- | --- |
| **字段名称** | **字段标识** | **字段说明** |
| 事件描述 | desc | 描述事件的详细信息，包括当前遇到的事件的发生过程及详情等 |
| 事件来源 | source | 描述发现事件的来源渠道，具体的事件来源的可选项可以在“事件数据字典”中维护 |
| 事件分类 | category | 描述发现事件的具体分类维度，具体的事件分类的可选项可以在“事件数据字典”中维护 |
| 事件发生时间 | occurred_at | 填写事件发生的时间 |
| 报告人 | reported_by | 填写报告事件的用户 |
| 处理组 | proceed_group | 分配事件对应的处理组 |
| 处理人 | proceed_user | 分配事件对应的处理人，若没有指定具体个人，则处理组成员均可以处理该事件单 |
| 事件原因 | reason | 描述引发事件的具体原因 |
| 解决时间 | solved_at | 填写事件解决的时间 |
| 解决方案 | resolution | 描述解决时间的具体方案 |
| 事件是否解决 | solved_status | 确认事件是否被解决 |
| 事件解决代码 | resolution_code | 填写解决该事件的解决代码，具体的解决代码信息可以在“事件数据字典”中维护 |
| 未解决原因 | unsolved_reason | 若事件无法解决，填写具体的原因 |
| 事件是否关闭 | closed_status | 确认事件单是否可关闭 |
| 未关闭原因 | unclosed_reason | 若事件单还不能被关闭，填写具体的原因 |
| 转建为知识 | transfer_knowledge_status | 确认是否将该事件单转建为知识存储 |

除了使用内置的事件表单模型以外，支持新增自定义的事件表单模型，新增事件表单模型的操作同“平台管理-表单管理-表单模型”。新增的表单模型在流程使用时将会默认继承内置的表单模型中的字段。

#### 事件数据字典

**前提条件：**

请确认您拥有“运行管理-事件管理-事件数据字典“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-事件管理-事件数据字典”模块，可以看到该模块中已经内置了部分事件管理数据字典，内置的数据字典会作为内置事件表单模型的数据源。这些内置的数据字典不支持删除。可以对内置的数据字典进行编辑，编辑时，可以修改内置数据字典的名称、描述等基础信息，内置的选项也可以进行修改、删除。

除了使用内置的事件数据字典以外，支持新增自定义的数据字典，新增事件数据字典的操作同“平台管理-全局配置-数据字典”。

#### 事件流程类型

**前提条件：**

请确认您拥有“运行管理-事件管理-事件流程类型“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-事件管理-事件流程类型”模块，可以看到该模块中已经内置了“事件管理”的流程类型，内置的流程类型不支持删除。

除了使用内置的流程类型以外，支持新增自定义的流程类型，新增事件数据字典的操作同“平台管理-全局配置-流程类型”。

#### 事件分配策略

**前提条件：**

请确认您拥有“运行管理-事件管理-事件分配策略“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

事件分配策略功能模块主要是建立规则表，匹配“事件分类”与“事件处理组/处理人”之间的对应关系，如果在事件管理流程中添加了内置的“事件分类”及“事件处理组/处理人”字段后，将会自动引用该分配策略规则，实现在工单中填写不同的事件分类时，基于设置的规则自动匹配对应的事件处理组/处理人。

点击编辑后，可以选择某一个事件分类，事件分类可选的数据源范围在“事件数据字典”中维护，选中一个事件分类后可以设置对应的处理组及处理人。

#### 事件流程设计

**前提条件：**

请确认您拥有“运行管理-事件管理-事件流程设计“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在事件流程设计功能板块中，您可以新增事件流程，新增流程时，需要选择流程绑定的表单模型及流程类型，可选范围分别为“事件表单模型”及“事件流程类型”中的有效数据。

新增流程后将进入表单设计页面，可以拖动左侧的字段到表单设计画布中，可以在”字段类型“中选择基础的字段添加到表单中。

完成表单设计后，进入事件流程设计页面完成事件流程的编排，并且完成流程设置后可以对编排好的流程进行发布，流程编排的操作同“平台管理-流程管理-流程设计”。

流程编排成功并且启用后，有权限的用户可以点击“运行管理-事件管理-创建工单”可以找到编排成功的流程发起工单。

#### 事件工单

**前提条件：**

请确认您拥有“运行管理-事件管理-事件工单“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在该功能界面，用户可以查看到所有事件管理的工单，可以通过预先内置的工单分组查看当前用户待办、经办、申请的工单等。

也可以点击工单分组设置用户自己的工单分组。

### 使用事件管理流程

#### 提交事件单

具有事件管理流程提单权限的用户可以通过以下三种渠道完成事件单的提交。

**通过事件管理应用提单：**

用户需要具有“运行管理-事件管理-创建工单”功能的权限。点击该页面已发布的事件管理流程，即可进入事件管理流程提单界面。

**通过服务目录提单：**

用户需要具备服务目录应用的提单权限且具有事件管理服务的提单权限。点击服务目录中的事件管理服务即可进入事件管理流程提单界面。

**通过工单中心提单：**

用户可以点击系统顶部的“工单中心”进入该功能界面，点击页面上的“创建工单”按钮后选择事件管理分类下的流程即可进入事件管理流程提单界面。

#### 处理事件单

事件工单的处理人可以通过以下两种渠道进行事件单的处理。

**通过事件管理应用处理工单：**

用户需要具有“运行管理-事件管理-事件工单”功能的权限。进入该功能界面后，可以查看到事件管理的工单信息，进入“我的待办”中可以查看到待我处理的工单列表。

**通过工单中心处理工单：**

事件处理人可以点击系统顶部的“工单中心”进入该功能界面，进入“我的待办”中可以查看到待我处理的工单列表。

## 变更管理

### 变更管理概述

变更管理模块支持变更管理流程，包括管控请求、审批和修改等对于组织基础架构的变更的活动。范围包含网络环境、基础设施和资源等资产。变更管理使 IT 组织能够在整个服务生命周期中控制基线服务资产和配置项的变更。

#### ITIL 中的变更管理

ITIL 变更管理的内容主要包括以下几点：

**定义：**

变更管理是负责确保变更以受控的方式记录、评估、计划、测试、实施和审查的过程。

**业务目标：**

- 使用标准化的方法和程序，确保对所有变更进行高效和及时的处理。
- 在配置管理模块（CMDB）中记录所有对服务资产和配置项（CIs）的变更。
- 尽量减少整体业务风险。
- 响应客户不断变化的业务需求，最大化价值，减少事件和重新变更的次数。
- 响应业务和 IT 对变更的请求，使服务与业务需求保持一致。

#### 变更管理模块能力

变更管理的主要目标是在对 IT 服务造成最小干扰的情况下实现有益的变更，实现目标的方式是以严格遵守流程步骤方式记录、评估、授权、确定优先级、计划、测试、实施、记录和审查变更。

变更管理模块结合了 ITIL 的基本变更管理概念，确保 IT 服务管理的最佳实践能够落地。

#### 变更管理和请求管理的区别

**变更管理：**变更管理处理对业务环境进行修改或破坏的任何变更，通常修改或破坏会影响多个用户或业务部门。

**请求管理：**请求管理处理对 IT 系统和服务的常见请求，发生频率高，处理风险极低，通常只影响提出请求的人或一组下属员工，影响范围有限。

### 配置变更管理流程

#### 安装变更管理应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装变更管理应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“变更管理”应用，点击“安装”即可安装变更管理应用，安装成功的变更管理应用可以在“运行管理”菜单下查看到。

点击变更管理应用的“详情”按钮可以查看该应用插件的功能介绍、插件资料、依赖说明和关联插件等信息。

#### 变更表单模型

**前提条件：**

请确认您拥有“运行管理-变更管理-变更表单模型管理“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-变更管理-变更表单模型管理”模块，可以看到该模块中已经内置了一个变更管理表单模型，该内置的表单模型中已经提前预设了变更管理流程中可能会应用到的字段，内置的表单模型不支持删除。

除了使用内置的变更表单模型以外，支持新增自定义的变更表单模型，新增变更表单模型的操作同“平台管理-表单管理-表单模型”。新增的表单模型在流程使用时将会默认继承内置的表单模型中的字段。

#### 变更数据字典

**前提条件：**

请确认您拥有“运行管理-变更管理-变更数据字典“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-变更管理-变更数据字典”模块，可以看到该模块中已经内置了部分变更管理数据字典，内置的数据字典会作为内置变更表单模型的数据源。这些内置的数据字典不支持删除。可以对内置的数据字典进行编辑，编辑时，可以修改内置数据字典的名称、描述等基础信息，内置的选项也可以进行修改、删除。

除了使用内置的变更数据字典以外，支持新增自定义的数据字典，新增变更数据字典的操作同“平台管理-全局配置-数据字典”。

#### 变更流程类型

**前提条件：**

请确认您拥有“运行管理-变更管理-变更流程类型“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-变更管理-变更流程类型”模块，可以看到该模块中已经内置了“变更管理”的流程类型，内置的流程类型不支持删除。

除了使用内置的流程类型以外，支持新增自定义的流程类型，新增变更数据字典的操作同“平台管理-全局配置-流程类型”。

#### 变更流程设计

**前提条件：**

请确认您拥有“运行管理-变更管理-变更流程设计“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在变更流程设计功能板块中，您可以对变更流程进行管理，新增流程时，需要选择流程绑定的表单模型及流程类型，可选范围分别为“变更表单模型”及“变更流程类型”中的有效数据。

新增流程后将进入表单设计页面，可以拖动左侧的字段到表单设计画布中，可以在”字段类型“中选择基础的字段添加到表单中。

完成表单设计后，进入变更流程设计页面完成变更流程的编排，并且完成流程设置后可以对编排好的流程进行发布，流程编排的操作同“平台管理-流程管理-流程设计”。

流程编排成功并且启用后，有权限的用户可以点击“运行管理-变更管理-创建工单”可以找到编排成功的流程发起工单。

#### 配置变更窗口/变更管控规则

**前提条件：**

请确认您拥有“运行管理-变更管理-时间计划“和“运行管理-变更管理-变更流程设计”模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在变更相关的时间计划中，您可以按照实际情况将窗口时间、窗口时间的时间区间先配置出来，包括对应的周期和具体的时间区间。支持在一个计划内添加多个时间段，我们建议您按照窗口或管控的区分，分别设置相应计划。

完成时间计划相关的内容设计后，您需要分别设置窗口规则和管控规则（以下我们将简称二者为“规则”），在设置规则的时候，您需要注意以下几点：

1.  设置窗口的时候，通常来说是一种变更模型对应一个窗口；因此您有多少种变更模型，将会有与之对应的多少个窗口。
2.  由于不同管理要求下，对变更窗口期内是否允许提单的要求也不一致，您可以按需勾选是否允许提单人在不满足窗口要求的情况下仍允许提单。管控期内不允许提交工单，窗口期内允许提交工单，既不在管控期也不在窗口期的则按照窗口内的设置生效。
3.  不论是窗口还是管控，在设置规则的时候都能够基于您选择的变更表单模型，从中选取字段，设置字段值作为规则的生效条件；规则与计划绑定后，将组成一个完成的窗口或者管控。
4.  当变更单的内容既满足窗口也满足管控的时候，系统将优先判定其处于管控期。

接下来您在“变更管理-变更流程设计”里面编排流程的时候，只需要将内置的“变更计划时间”添加到流程内，将会自动为这个流程开启变更窗口和变更管控的校验。

#### 配置变更单生成变更日历

**前提条件：**

请确认您拥有“运行管理-变更管理-变更日历“和“运行管理-变更管理-变更流程设计”模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

您可以在变更日历里面设置变更状态在变更日历上的颜色展示效果。

系统暂不支持手动创建变更日历，但您可以通过以下配置实现变更单自动生成变更日历，以及在变更日历上查看变更状态更新情况。

字段添加以后，当用户在前台流转工单的时候，当这个字段的选项值等于”是“，将会自动将当前工单内容创建对应的变更日历，并展示到变更日历上。

您可以按需设置变更日历生成的提醒内容，以及变更即将开始之前的提示信息。变更日历创建的提醒是实时生效的，变更提醒则是在变更即将开始前，发通知提醒变更实施人。

#### 变更工单

**前提条件：**

请确认您拥有“运行管理-变更管理-变更工单“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在该功能界面，用户可以查看到所有变更管理的工单，可以通过预先内置的工单分组查看当前用户待办、经办、申请的工单等。

也可以点击工单分组设置用户自己的工单分组。

### 联动 CMDB 进行实例变更

**前提条件：**

请先确认系统中已安装变更管理应用，如果没有安装，可以点击“平台管理-应用中心-应用集市”安装。

#### 配置关联项字段

点击“变更管理-变更流程设计”，在表单设计页面，从左侧“高级字段”中拖拽“单选配置项”或“多选配置项”字段到画布中，如下图所示。

其中，单选配置项字段表示用户在填写的时仅能选择一个配置项，多选配置项字段中表示用户在填写时可以选择多个配置项。

**注意：如果需要联动 CMDB 进行自动化变更，请选择“多选配置项”类型字段。**

该字段需要配置的内容如下（仅描述差异化的部分）：

<div class="joplin-table-wrapper"><table><tbody><tr><td><p><strong>属性名称</strong></p></td><td><p><strong>说明</strong></p></td></tr><tr><td><p>模型选择范围</p></td><td><p>限定该字段在工单使用时，可以选择的模型的范围，默认为不限。</p><ul><li>不限：用户可以选择其有权限选择的所有模型</li><li>限定范围：基于配置的范围展示，如果配置的范围中有当前工单填写人无权限的模型，不会展示无权限的模型。</li></ul></td></tr><tr><td><p>实例查询方式</p></td><td><ul><li>单模型查询：查询时需要先选定模型，再从该模型中搜索实例。</li><li>多模型查询：搜索实例选择需要查询的属性，如果有多个模型都包含该属性且，将会把能匹配目标搜索值的所有实例均显示出来。</li></ul></td></tr><tr><td><p>操作</p><p>（仅多选配置项字段支持设置）</p></td><td><ul><li>编辑实例：选择后可以在工单填写时选择需要进行修改的实例，并设置需要修改的属性。</li><li>删除实例：选择后可以在工单填写时选择需要删除的实例。</li><li>新增实例：选择后可以在工单填写时新增实例。</li><li>受影响的实例：选择后可以在工单填写时选择受影响的实例。</li></ul></td></tr><tr><td><p>查询实例时模型默认值</p><p>（仅单模型查询方式支持）</p></td><td><p>设置在查询实例时默认显示的模型（基于模型选择范围设置），支持以下两种方式：</p><ul><li>默认第一项：默认显示第一个模型</li><li>自定义：自己设置一个默认显示的模型</li></ul><p></p></td></tr></tbody></table></div>

#### 配置 CMDB 变更节点

如果需要实现联动 CMDB 进行自动化变更，需要在流程设计中配置 CMDB 变更节点进行联动 CMDB 的自动化变更。

**注意：表单中必须包含多选配置项类型的字段。**

点击“CMDB 变更”节点可以配置该节点的信息，该节点需要设置以下内容：

- 紧急联系人：当 CMDB 变更自动执行失败时，可以由此紧急联系人手动处理；
- 选择字段：选择“多选配置项”类型的字段，针对该字段中设置的增删改的场景进行自动化的变更。

#### 执行联动 CMDB 变更

详见“使用变更管理流程-提交配置项变更”章节的内容。

### 变更风险评估

#### 概述

“变更风险评估”是指在计划对现有系统、流程、环境、产品或组织等进行任何修改（即“变更”）之前和期间，系统化地识别、分析和评价该变更可能带来的潜在负面影响（风险）的过程。

其核心目的是在变更实施前，预见潜在问题，评估其发生的可能性和影响严重程度，从而做出更明智的决策，并制定有效的预防或应对措施，以最大限度地降低变更失败或产生不良后果的可能性，确保变更能够安全、平稳、成功地落地。

#### 风险评估问卷

用户可以进入“运行管理-变更管理-变更风险评估-风险评估问卷”设计变更风险评估时需要填写的问卷。

点击新增可以进入变更问卷设计界面，新增时需要先填写问卷的名称及描述信息，如下图所示：

完成名称填写后进入问卷设计画布，可以从左边拖拽字段到画布中间，每个字段对应一个问题，可以定义每个问题的以下属性：

- 字段名称：问题的标题
- 描述信息：问题的提示文字
- 状态：问题的显示状态
- 权重：该问题的权重因子，支持填写整数、小数、0，并且支持正数及负数
- 选项：问题对应的选项，每个选项可以编辑选项显示的文字以及每个选项对应的分值
- 默认值：选项默认值
- 校验：设置该问题是否必填
- 宽度：问题显示的宽度
- 自定义 class：通过编写脚本显示自定义的个性化样式

当问卷中的问题都填写完毕后，可以点击右上角“发布”按钮发布该问卷，发布后请确保该问卷处于“启用”状态，否则将无法在后续过程中被选择到。

#### 风险评估规则

用户可以进入“运行管理-变更管理-变更风险评估-风险评估规则”定义风险评估的分值与风险等级的对应规则。

点击新增可以新增一条风险评估规则，需要填写以下内容：

- 名称：评估规则的名称
- 描述：规则描述
- 条件字段：默认显示风险评估（数值类型），可以设置不同评估分值的条件。
- 结果字段：默认显示风险级别，风险级别对应的等级需要在变更数据字典-风险级别字段中维护，可以设置不同评估分值对应的风险级别。

### 变更冲突检测

#### 概述

1.  **功能概述：**

变更冲突检测是通过自动化比对分析计划内变更的各项关键属性，前瞻性地识别出存在资源、时间或依赖关系冲突的变更请求，并向变更管理人员发出预警。该功能旨在强化风险控制，保障变更实施的顺利与安全，是实现 IT 服务稳定性和业务连续性的重要工具。

1.  **支持的冲突检测场景**

当前支持检测以下五类场景：

1.  当前变更工单的计划变更时间段与设置的变更管控时间段有重叠；
2.  当前要变更的 CI 除了当前该工单外，还有其他未结束的变更工单，且当前变更单的计划变更时间段与其他未结束的变更工单的计划变更时间段有重叠；
3.  当前要变更的 CI 的父级 CI 如果有其他未结束的变更工单，且当前变更单的计划变更时间段与其他未结束的变更工单的计划变更时间段有重叠；
4.  当前要变更的 CI 的子级 CI 如果有其他未结束的变更工单，且当前变更单的计划变更时间段与其他未结束的变更工单的计划变更时间段有重叠；
5.  当前变更工单的计划变更时间段不在设置的变更窗口时间段内。

### 使用变更管理流程

#### 提交变更单

具有变更管理流程提单权限的用户可以通过以下三种渠道完成变更单的提交。

**通过变更管理应用提单：**

用户需要具有“运行管理-变更管理-创建工单”功能的权限。点击该页面已发布的变更管理流程，即可进入变更管理流程提单界面。

**通过服务目录提单：**

用户需要具备服务目录应用的提单权限且具有变更管理服务的提单权限。点击服务目录中的变更管理服务即可进入对应流程提单界面。

**通过工单中心提单：**

用户可以点击系统顶部的“工单中心”进入该功能界面，点击页面上的“创建工单”按钮后选择变更管理分类下的流程即可进入对应流程提单界面。

#### 提交配置项变更

**修改配置项：**

前提：表单中需要配置“多选配置项”类型的字段。
在提交工单时，如果需要修改某些配置项的属性，可以在提交工单时。在“编辑实例”的标签下点击“添加实例”的按钮。在弹出的弹框中可以选择需要修改的实例：点击每个实例的名称可以查看该实例的详情：选中实例后结果如下图所示，点击每个实例可查看该实例的详情：选择需要修改的属性，并设置批量修改后的值：如果需要继续添加该模型下需要修改的实例，并且修改的属性值也一样，可以点击模型后方的添加按钮：如果需要新增其他模型的实例进行修改，或者需要修改已选的模型或者实例的其他属性值，可以点击下方的“添加实例”的按钮：

**删除配置项：**

前提：表单中需要配置“多选配置项”类型的字段。在提交工单时，如果需要删除某些实例，可以在提交工单时。在“删除实例”的标签下点击“添加实例”的按钮。在弹出的弹框中可以选择需要删除的实例：点击每个实例的名称可以查看该实例的详情：

**新增配置项：**

前提：表单中需要配置“多选配置项”类型的字段。在提交工单时，如果需要新增配置项，可以在提交工单时。在“新增实例”的标签下点击“添加实例”的按钮。点击新增实例后，需要选择新增哪个模型下的配置项，并且选择新增方式选定模型后，新增方式为手动新增时，下方出现该模型实例需要填写的属性，如下图所示：选定模型后，新增方式为批量导入时，下方出现该模型实例的模板，可以下载模板并填写内容后再上传，如下图所示：

**执行 CMDB 变更：**

当工单流转至 CMDB 变更节点后会自动执行 CMDB 变更动作，并且在工单中展示 CMDB 变更的结果。当所有的变更都执行成功时，该 CMDB 节点将会自动提交。当执行失败时，可以在工单详情界面点击重试或者由该节点的紧急处理人在 CMDB 中手动修改对应的配置项信息，并在该工单详情中将执行手动改为“手动执行成功”，并手动提交该节点。

#### 处理变更单

变更工单的处理人可以通过以下两种渠道进行变更单的处理。

**通过变更管理应用处理工单：**

用户需要具有“运行管理-变更管理-变更工单”功能的权限。进入该功能界面后，可以查看到变更管理的工单信息，进入“我的待办”中可以查看到待我处理的工单列表。

**通过工单中心处理工单：**

变更处理人可以点击系统顶部的“工单中心”进入该功能界面，进入“我的待办”中可以查看到待我处理的工单列表。

## 问题管理

### 问题管理概述

问题管理模块提供全面的问题管理能力，使 IT 组织能够查找、修复和预防 IT 基础架构、应用、流程和服务中的问题。问题管理模块可以降低或消除重复发生的事件，并将无法预防的事件的影响降至最低，最大限度提高系统可用性、提高服务水平、降低成本并提高客户便利性和满意度。

#### ITIL 中的问题管理

ITIL 问题管理的内容主要包括以下几点：

**定义：**

问题管理是管理所有问题生命周期的过程。

**主要收益：**

提高服务质量和可靠性。随着事件的解决，关于其解决方案的信息被记录下来，这些信息可以用来识别和快速解决以后出现的类似事件，然后从根本上解决和修复这些事件。

#### 问题管理模块能力

- 减少事件影响：帮助 IT 组织在出现由 IT 基础设施中错误引起的事件的影响降至最低，以及预防错误的再次发生。
- 识别已知错误：帮助 IT 团队识别已知错误，实施解决方法，并提供永久性解决方案。
- 识别和记录错误：使 IT 组织能够识别 IT 基础设施中的错误并记录和跟踪，直至找到解决方案，并防止其再次发生。
- 加快问题解决速度：帮助 IT 组织的人员记录解决方案，并适当同步到受影响的用户群体，以更快地应对与事件相关的问题。
- 预防性解决问题：有助于在事件发生之前主动解决问题。
- 长期效益：通过长期开展问题管理可以减少事件数量，节约时间和成本。

### 配置问题管理流程

#### 安装问题管理应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装问题管理应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“问题管理”应用，点击“安装”即可安装问题管理应用，安装成功的问题管理应用可以在“运行管理”菜单下查看到。

点击问题管理应用的“详情”按钮可以查看该应用插件的功能介绍、插件资料、依赖说明和关联插件等信息。

#### 问题表单模型

**前提条件：**

请确认您拥有“运行管理-问题管理-问题表单模型管理“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-问题管理-问题表单模型管理”模块，可以看到该模块中已经内置了一个问题管理表单模型，该内置的表单模型中已经提前预设了问题管理流程中可能会应用到的字段，内置的表单模型不支持删除。

#### 问题数据字典

**前提条件：**

请确认您拥有“运行管理-问题管理-问题数据字典“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-问题管理-问题数据字典”模块，可以看到该模块中已经内置了部分问题管理数据字典，内置的数据字典会作为内置问题表单模型的数据源。这些内置的数据字典不支持删除。可以对内置的数据字典进行编辑，编辑时，可以修改内置数据字典的名称、描述等基础信息，内置的选项也可以进行修改、删除。

除了使用内置的问题数据字典以外，支持新增自定义的数据字典，新增问题数据字典的操作同“平台管理-全局配置-数据字典”。

#### 问题流程类型

**前提条件：**

请确认您拥有“运行管理-问题管理-问题流程类型“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-问题管理-问题流程类型”模块，可以看到该模块中已经内置了“问题管理”的流程类型，内置的流程类型不支持删除。

除了使用内置的流程类型以外，支持新增自定义的流程类型，新增问题数据字典的操作同“平台管理-全局配置-流程类型”。

#### 问题流程设计

**前提条件：**

请确认您拥有“运行管理-问题管理-问题流程设计“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在问题流程设计功能板块中，您可以新增问题流程，新增流程时，需要选择流程绑定的表单模型及流程类型，可选范围分别为“问题表单模型”及“问题流程类型”中的有效数据。

新增流程后将进入表单设计页面，可以拖动左侧的字段到表单设计画布中，其可以在”字段类型“中选择基础的字段添加到表单中。完成表单设计后，进入问题流程设计页面完成事件流程的编排，并且完成流程设置后可以对编排好的流程进行发布，流程编排的操作同“平台管理-流程管理-流程设计”。流程编排成功并且启用后，有权限的用户可以点击“运行管理-问题管理-创建工单”可以找到编排成功的流程发起工单。

#### 问题工单

**前提条件：**

请确认您拥有“运行管理-问题管理-问题工单“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

在该功能界面，用户可以查看到所有问题管理的工单，可以通过预先内置的工单分组查看当前用户待办、经办、申请的工单等。

也可以点击工单分组设置用户自己的工单分组。

### 使用问题管理流程

#### 提交问题单

具有问题管理流程提单权限的用户可以通过以下三种渠道完成问题单的提交。

**通过问题管理应用提单：**

用户需要具有“运行管理-问题管理-创建工单”功能的权限。点击该页面已发布的问题管理流程，即可进入问题管理流程提单界面。

**通过服务目录提单：**

用户需要具备服务目录应用的提单权限且具有问题管理服务的提单权限。点击服务目录中的问题管理服务即可进入对应流程提单界面。

**通过工单中心提单：**

用户可以点击系统顶部的“工单中心”进入该功能界面，点击页面上的“创建工单”按钮后选择变更管理分类下的流程即可进入对应流程提单界面。

#### 处理问题单

问题工单的处理人可以通过以下两种渠道进行问题单的处理。

**通过问题管理应用处理工单：**

用户需要具有“运行管理-问题管理-问题工单”功能的权限。进入该功能界面后，可以查看到问题管理的工单信息，进入“我的待办”中可以查看到待我处理的工单列表。

**通过工单中心处理工单：**

变更处理人可以点击系统顶部的“工单中心”进入该功能界面，进入“我的待办”中可以查看到待我处理的工单列表。

## 用户组管理

运行管理下支持维护用户组管理，用户组管理的功能同“平台管理-组织管理-用户组管理”。当运行管理下安装了应用后，该应用预先内置的用户组会在该模块下显示，内置的用户组不支持删除，仅支持修改用户组下的成员及添加用户组标签信息。

## 值班管理

### 值班管理概述

ITSM 值班管理通过对值班单位和成员设置值班排班表，与流程结合以后，可以最大化保障服务的连续性以及提高服务响应速度，从而达到合理“使用”人员资源，提升服务质量的目标。

值班管理主要是值班成员的管理，以及值班成员排班计划的制定，以及整个值班过程中可能会遇到的请假、调班、替班、插班等对于班次的调整和管理。为了确保值班数据的准确性，值班经理可以对值班排班表进行复核，复核通过后排班计划才会正式生效。

### 配置值班管理

#### 安装值班管理应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装服务目录管理应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“值班管理”应用，点击“安装”即可安装值班管理管理应用，安装成功的值班管理应用可以在“运行管理”菜单下查看到。

点击值班管理应用的“详情”按钮可以查看该应用插件的功能介绍、插件资料、依赖说明和关联插件等信息。

#### 设置值班单位

**前提条件：**

请确认您拥有“运行管理-值班管理-值班单位“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-值班管理-值班单位”的页面。在值班单位这个选项下，点击页面上的“新增”按钮；在新打开的页面上，填写值班单位的基础信息以及岗位人员即可。分隔线以下的字段，可以在页面上直接拖拽调整字段顺序。如果需要新增值班单位的基础信息字段，可以点击页面上的“值班单位字段”，在当前页面上，点击“新增”按钮后，在打开的页面内定义新增字段信息即可。

“是否是岗位”选择“是”的情况下，当前字段就作为值班单位的岗位信息，字段类型也会固定为“人员选择器”，在填写值班单位信息的时候，这个字段将会同值班成员、值班经理一起，直接选择具体的人。

#### 设置值班模式

**前提条件：**

请确认您拥有“运行管理-值班管理-值班模式“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-值班管理-值班模式”的页面。

在值班模式的页面内，点击“新增按钮即可打开对应的设置页面。在设置值班模式的页面内，可以按需定义值班时间区间、值班频次、加班时间、休假时间。在一个规则内支持设置多个班次，班次内选择值班时间的时候，可以选择是否跨天，开启跨天，将可以设置类似今日 20:00-次日 8:00 这样的时间段。

#### 设置值班组

**前提条件：**

请确认您拥有“运行管理-值班管理-值班组“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-值班管理-值班模式”的页面。在开始设置值班组之前，需要先完成值班单位、值班模式的配置工作。

在值班组的页面内，可以点击“新增”按钮，

在打开的新页面内，填写值班组的基础信息并设置值班规则。

在选择值班人员的时候可以从值班单位内选择，也可以自定义选择。

设置值班规则的时候，一个值班组只能选择一种值班模式，如果没有提前设置好值班模式，也可以在当前页面上新增值班模式。

值班人员分配的时候，默认是通过给不同的班次固定人数的形式，也可以勾选上“指定值班人员”的开关后，从当前值班组所选的人员里面，直接选定固定的人到对应班次。

#### 排班

**前提条件：**

请确认您拥有“运行管理-值班管理-值班日历“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-值班管理-值班日历”的页面。鼠标悬浮到”新增“按钮的时候，可以看到：可以通过页面手动新增排班，也可以下载模版后导入文件排班。

- 手动新增：点击“手动新增”按钮以后，在打开的页面内，选择需要排班的方式：按值班组、按值班单位、自定义选择。
    - 按值班组：选择目标值班组后，选择需要开始排班的日期和排班的周期，系统将会自动生成对应的排班计划；
    - 按值班单位：选择目标值班单位后，需要选择值班模式以及人员分配等信息，系统将会自动生成对应的排班计划；
    - 自定义选择：和按值班单位排班类似，也是填完页面上的信息后，系统就会自动生成对应的排班计划。
- 文件导入：页面上选择“文件导入”后，在打开的弹窗里面选择需要排班的值班组后，下载对应的排班模版。**注意：不同值班组对应的排班模版不一样**

排班以后，如果没有开启值班复核，那么就完成排班了；如果开启了值班复核，则需要继续往下看。

针对已经排班的记录：点击未值班的人员可以进行调班（跟其他人员对调）、替班（由其他未值班人员顶替）；点击未来的日期可以进行插班（新增人员在当前日期值班）。

#### 复核排班信息

**前提条件：**

请确认您拥有“运行管理-值班管理-值班信息复核“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-值班管理-值班信息复核”的页面。通过右上角的筛选条件，选择目标排班计划，复核没有问题则点击页面左侧的“确认排班”即可将当前页面上的排班发布出去。

- **导出**：点击“导出”按钮，将会导出页面上看到的所有值班排班计划。
- **插班**：点击图标，将会弹出弹窗，在弹窗内，可以对所点击时间段的排班插班。例如点击图中的“值班组-组织多”后的加号，在弹出的弹窗内则可以针对这天，增加当前值班组的排班人员和班次。

#### 配置值班组派单

当安装了值班管理应用后，如果需要值班组参与工单的处理，可以基于一定规则分配工单给到值班组当值人员。

在流程设计时，选择“值班组派单”节点，并且完成以下内容的设置：

- 处理人：仅支持选择“值班组”模块中设置好的值班组，工单将基于选择的工单处理方式将工单分派给选中的值班组的当值人员。若没有当前当值人员，工单将分配给紧急处理人。
- 多人处理方式：支持四种处理方式，包括协同、并行、轮询派单及负载派单。

设置完成后，即该节点将基于配置的值班组及处理方式分配给对应值班组成员，并由该成员完成当前节点处理。

### 使用值班管理

#### 查看排班

- 普通用户视角：

登录 IT 服务管理中心，进入“我的值班”模块后，可以在日历视图上看到与“我”相关的排班情况。可以点击红框右侧的“列表视图”，以列表的形式查看排班情况。

- 管理员视角：

**前提条件：**

请确认您拥有“运行管理-值班管理-值班日历“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-值班管理-值班日历”的页面。可以查看日历视图的排班，也可以切换到列表视图查看排班情况。注意，后台查看排班情况的时候，可以看到所有值班单位的排班。

#### 值班打卡

登录 IT 服务管理中心，进入“我的值班”模块后，可以在日历视图上看到与“我”相关的排班情况，点击“打卡”按钮，在弹出的弹窗内选择需要打卡的班次即可。

一个班次的最早打卡记录会记录为签到时间，最晚打卡记录会记录为签退时间。根据签到、签退时间，系统将会自动判定当前班次的值班情况。

#### 查看值班记录

**前提条件：**

请确认您拥有“运行管理-值班管理-值班日历“模块的功能权限，否则将无法使用该功能。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“运行管理-值班管理-值班记录”的页面。展示值班小组的值班详情，有值班状态和值班日志等。支持对值班记录进行补签及批量补签。

值班记录的状态流转逻辑：

- 待值班

待值班 → 值班中：值班人员开始执行任务。

待值班 → 请假：值班人员提前请假并获得批准。

待值班 → 缺勤：值班时间到而未到岗。

- 值班中

值班中 → 正常：按时到岗并签退。

值班中 → 迟到：未在规定时间到岗。

值班中 → 早退：提前离岗。

值班中 → 代班：临时请到代班人员替代任务。

值班中 → 未签退：未按规定签退。

值班中 → 完成值班：值班结束，状态归档为已完成。

- 正常

正常 → 完成值班：值班任务结束且归档。

- 迟到

迟到 → 完成值班：签退后，归档为已完成。

迟到 → 迟到且早退：提前离岗。

迟到 → 迟到且未签退：未按规定签退。

- 早退

早退 → 完成值班：签退后，归档为已完成。

迟到且早退 → 完成值班：签退后，归档为已完成。

- 缺勤

缺勤 → 请假：后期补办请假手续并获批准。

- 请假

请假 → 待值班：请假结束恢复正常安排。

请假 → 完成值班：值班任务结束。

请假 →值班中：请假期间值班人员正在执行值班任务。

# 服务台

## 服务目录管理

### 概述

ITSM 服务目录旨在为用户提供一个可视化的服务清单，以便他们了解和访问可用的 IT 服务。通过 ITSM 服务目录，用户可以了解到组织所提供的各种服务的细节和要求，如如何请求服务、服务支持的时间范围、服务提供者的联系信息等。这有助于提高用户满意度，加强用户与 IT 部门之间的沟通和合作。

ITSM 服务目录还可以帮助组织有效管理和规划 IT 服务。通过对服务目录的完善和更新，可以促使 IT 部门对服务进行分类、优化和改进，确保提供符合用户期望的高质量服务。此外，服务目录还可以与 IT 服务管理流程、变更管理和问题管理等相关的 ITSM 实践相结合，以提高 IT 服务的整体管理水平。

总之，ITSM 服务目录是组织定义和管理其提供的 IT 服务的清单，它为用户提供了更好的对服务的了解和访问，同时也为 IT 部门提供了一个重要的管理工具。

ITSM 服务项提供给用户快速提交工单的入口，用户通过服务项可以发起工单，因此可快速响应用户的需求和问题，提供准确和及时的支持。

### 安装服务目录管理应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装服务目录管理应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“服务目录管理”应用，点击“安装”即可安装服务目录管理应用，安装成功的服务目录管理应用可以在“服务台”菜单下查看到。

点击服务目录管理应用的“详情”按钮可以查看该应用插件的功能介绍、插件资料、依赖说明和关联插件等信息。

### 服务项管理

**新增服务项：**

点击“服务”设置菜单右上角的“新增”按钮，页面会弹出新增服务项的窗口，在弹出的页面上填写以下字段信息：

- 服务名称：展示给用户的服务项名称，方便用户识别具体的服务内容；
- 编码：该服务项的唯一标识，默认系统自动生成，可以修改；
- 服务负责人：默认为当前系统登录用户，可以修改；
- 启/停：默认开启，服务启用并挂靠在具体的服务目录后，可以支持服务可见范围内的用户选择到，停用的服务将会对用户不可见；
- 服务类型：支持表单服务和内容服务两种类型，默认为表单服务。其中，表单服务是指绑定 ITSM 系统中已经创建的某个流程，并且需要设置流程类型；内容服务是指不需要进行提交，不需要进行流程处理的服务，可以向用户提供一个可查看的内容信息，比如提供知识、外部链接等，因此该类型选择后绑定一个 URL 地址，没有流程类型的概念；
- 服务目录：选择该服务挂靠的服务目录，支持多选；
- 流程：如果该服务类型是表单服务，需要选择该服务绑定的流程，仅支持选择所有应用中处于“启用”状态的流程（注意：若服务绑定了某流程后，该流程后续被停用，则该服务项也会默认被停用）。选择后的流程支持点击后方“查看流程”按钮跳转具体的流程详情；
- 流程类型：选择流程后，将会根据该流程的类型自动填充；
- 描述：该服务项的描述详情；
- 可见范围：设置该服务允许可见的人员范围；
- 提单渠道：设置该服务允许发起工单的渠道，但是设置的渠道不影响处理工单，即所有渠道均可以处理工单。
- 显示图标配置：配置该服务在服务目录页面中显示的图标。

**服务项列表管理：**

新增成功的服务项将会在服务项列表中统一展示，在该列表上支持对服务项进行快捷搜索、快速启/停服务项、点击编辑服务项及复制服务项。

### 服务目录管理

**新增服务目录：**

点击服务目录页面的“+”按钮可以新增服务目录，新增时，需要输入以下字段信息：

- 服务目录名称：展示给用户的服务目录的名称，方便用户识别目录并查找到对应的服务；
- 编码：该服务目录的唯一标识，默认系统自动生成，可以修改；
- 所属父级：设置该服务目录的父级，若不设置，该服务目录将显示为一级服务目录；
- 负责人：默认为当前系统登录用户，可以修改；
- 描述：该服务目录的描述详情；

**在服务目录中添加服务项：**

选中某个服务目录后，可以点击页面的“添加”按钮在该服务目录中添加服务项。可以添加的服务项为“服务”模块中成功添加并启用的服务项。若想要添加的服务项尚未常见，可以在服务目录页面点击“新增服务”按钮添加一个新服务，添加成功后该服务项将会自动显示在该服务目录中。

**服务目录/服务项展示排序：**

鼠标拖拽服务目录/服务项左侧的按钮可以对服务目录/服务项的展示进行排序。

### 服务设置

**动态目录设置：**

动态目录是指在展示给用户的服务目录中，动态展示的内容。开启开关时会在服务目录中显示，并且可以设置每项内容展示的个数，关闭开关时隐藏显示。动态目录支持配置的包括以下几部分内容：

- 最近使用：展示用户最近点击的服务项，展示顺序按照点击时间从晚到早排列；
- 我的收藏：展示用户收藏的服务项，展示顺序按照收藏时间从晚到早排列；
- 热门服务：根据当前门户下服务的点击次数从高到低展示。

**服务目录展示设置：**

服务目录的展示设置支持配置以下内容：

- 服务目录图标：是否在服务目录页面展示服务目录的图标；
- 服务项图标：是否在服务目录页面展示服务项的图标；
- 每行展示服务项数量：设置服务目录页面每行展示的服务项数量，设置成功后将对当前门户下所有用户生效。

### 使用服务目录

最终用户可以点击系统顶部的“服务目录”菜单进入服务目录页面，在该页面上用户可以看到系统提供给该用户可以申请的服务项，用户点击某个服务项将会直接跳转该服务项的提单页面。

在该页面上支持输入关键词对服务目录或者服务项进行搜索；并且基于动态目录配置的内容查看到最近使用的服务、用户收藏的服务及热门服务。

## 满意度管理

### 概述

ITSM 中的满意度管理是一个系统化的、闭环的流程，它通过科学的方法收集用户对 IT 服务的感知，深入分析这些反馈，并将分析结果转化为具体的服务改进行动，最终目标是系统性地测量、理解并提升用户（内部员工、外部客户）及其他利益相关者对 IT 服务质量和体验的感知，并利用这些反馈驱动服务改进和价值证明。

### 安装满意度管理应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装满意度管理应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“满意度管理”应用，点击“安装”即可安装满意度管理应用，安装成功的满意度管理应用可以在“服务台管理”菜单下查看到。

### 问卷设计

点击“服务台管理-满意度管理-问卷设计”可以查看到所有的满意度问卷，系统提供一套内置的默认问卷模板，可以基于默认的问卷模板修改，或者点击新增一套问卷模板。

新增问卷模板时，需要填写以下信息：

- 名称：问卷的名称。
- 优先级：问卷的优先级。优先级不可重复，数值越低优先级越高。若工单满足多个满意度评价模板，仅为用户推送优先级最高的模板。
- 描述：问卷的描述信息。

点击确认后，进入问卷设计界面。如果需要计算满意度的综合得分，需要从左侧拖拽“满意度评分”字段到画布中，并且将需要计入满意度评分的字段都拖拽到“满意度评分”字段的容器内。对于评价维度字段，可以修改展示的字段名称，并且对于选项进行修改及定义每个选项的分值，如下图所示：**注意：满意度评价综合评分=综合评分下各个评价维度得分之和/评价维度的个数。**在问卷的 UI 规则设置中，也可以基于条件设置字段的可见、必填、隐藏等属性。问卷设计完毕后，点击右上角“下一步”按钮进入问卷设置界面。触发事件及条件：配置满意度问卷发送的触发事件、生效流程及触发条件。

- 问卷填写人：设置谁有权限填写问卷。

完成以上设置后，点击右上角“发布”按钮，则该评价问卷即可发布成功。

当评价问卷发布后再次编辑问卷并发布后，是否按照最新的问卷内容发送或者展示将基于以下表格中的情况区分：

|     |     |     |     |     |
| --- | --- | --- | --- | --- |
| 场景  | 优先级 | 问卷字段配置 | 触发事件及条件 | 评价人 |
| 修改前已经发出的满意度评价但是用户已评价 | 不按照最新 | 不按照最新 | 不按照最新 | 不按照最新 |
| 修改前已经发出的满意度评价但是用户未评价 | 不按照最新 | 按照最新 | 不按照最新 | 按照最新 |
| 未发出的工单评价 | 按照最新 | 按照最新 | 按照最新 | 按照最新 |

### 工单中进行满意度评价

当工单满足了满意度问卷配置的条件时，满意度问卷的填写人将会在工单侧边栏中查看到满意度评价的入口。

## 知识管理

### 概述

ITSM 的知识管理是指在 IT 服务管理过程中，为更好地收集、整理、共享和应用 IT 知识资源而采取的一系列方法和实践。在 ITSM 实践中，知识管理旨在收集和组织各种类型的 IT 知识，包括操作手册、故障解决指南、最佳实践、经验教训等。通过 ITSM 的知识管理，组织可以更好地利用、共享和应用 IT 知识，提高 IT 服务管理的效率和质量，同时也能够解决问题更快、提供更好的客户支持。

### 安装知识管理应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装知识管理应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“知识管理”应用，点击“安装”即可安装知识管理应用，安装成功的知识管理应用可以在系统顶部导航菜单下查看到。

### 知识分类管理

安装“知识中心”应用后，在知识中心“所有文章”页面左侧可以查看到系统预先内置的文章分类列表。

点击每一个分类层级后面的“更多”按钮可以新增子级分类。新增知识分类时需要输入以下信息：

- 分类名称：显示给用户查看的知识分类的名称；
- 可见范围：设置每个目录分类可见的人员，设置的可见范围只对当前层级的目录生效，即父级和子级的可见范围分别独立。
- 分类描述：该分类的描述详情。

已经建好的知识分类也支持编辑或删除。删除分类时，需要该分类下没有挂载任何知识文章内容时才可以删除。当删除父级分类时，需将其下的子分类全删除才可以删除父级分类。

### 查看知识

点击知识分类中的每一级分类可以在页面右侧查看到该分类下的所有知识列表，支持对知识关键字进行检索，检索范围包括知识标题及知识正文内容。支持通过知识标签筛选知识。

支持对知识列表进行排序，排序规则包括：最新发布、阅读最多、点赞最多及评分最高，默认按照最新发布的知识顺序排序。

每篇知识在列表上展示了以下内容：

- 知识标题；
- 知识 ID：即该知识的全局唯一标识；
- 知识浏览次数；
- 知识评论数：支持点击评论图标快速打开知识评论窗口；
- 知识点赞次数：支持点击点赞图标快捷对该知识进行点赞；
- 知识收藏次数：支持点击收藏图标快捷对该知识进行收藏；
- 知识创建人；
- 知识发布时间；
- 知识所属分类。

点击知识列表每条知识内容可以打开该知识文章的详情页面，在该页面上支持该知识文章进行点赞、收藏、评论即评分。文章作者或者其他有权限的用户还可以对该文章进行编辑或者删除操作。

### 我的文章管理

点击“知识中心-我的中心”板块可以查看到当前登录用户编写的文章内容。页面左侧区域展示的是当前用户编写的已发布的全部文章，支持基于文章状态及文章关键词搜索，鼠标悬浮到每篇文章后面后可以查看该篇文章的发布历史。页面右侧展示的是当前用户编写但尚未发布的草稿文章内容。

### 我的收藏管理

“我的收藏”板块展示当前用户收藏的所有文章清单。

### 知识标签管理

有权限的用户可以在“标签管理”中维护知识的标签，点击“新增”按钮可以新增知识标签，已添加的标签知识编辑和删除。

在编写文章时，可以选择知识标签添加到文章中。

### 写文章

在 ITSM 产品中，写文章提供了以下两个入口：

**入口一：点击知识中心右上角的“写文章”按钮可以打开文章编写页面。**

**入口二：点击“服务台管理-知识管理-写文章”可以打开文章编写页面**

点击写文章后打开以下知识发布流程界面

### 知识后台管理

当安装了“知识管理”应用后，在“服务台管理”菜单下面可以查看到“知识管理”菜单界面，在这个界面上可以看到知识管理相关的工单，配置知识审批相关的工作流、知识模板及知识通知等功能。

#### 知识表单模型

进入“服务台管理-知识管理-知识表单模型”模块，可以看到该模块中已经内置了一个知识管理表单模型，该内置的表单模型中已经提前预设了知识管理流程中可能会应用到的字段，内置的表单模型不支持删除。

点击“编辑”内置的表单模型可以查看到内置表单模型中内置的字段列表。内置的字段不支持删除，编辑内置字段时不支持修改字段的类型和标识。除了内置字段以外，还可以在内置表单模型中新增其他的字段。

知识管理内置字段如下表所示：

|     |     |     |
| --- | --- | --- |
| **字段名称** | **字段标识** | **字段说明** |
| 知识内容 | knowledge_content | 描述知识的详细内容 |
| 知识附件 | knowledge_file | 知识中添加的附件 |
| 知识分类 | knowledge_classification | 知识的分类 |
| 关联工单 | related_tickets | 该知识关联的工单 |
| 标签  | tags | 该知识所属的标签 |
| 知识 ID | revision_id | 知识对应的 ID。**请注意：知识发布流程和知识停用流程中必须添加该知识 ID 字段，否则可能导致知识发布和知识停用失败，如果不希望该字段显示给用户查看，可以将字段设置为隐藏。** |

除了使用内置的知识表单模型以外，支持新增自定义的知识表单模型，新增知识表单模型的操作同“平台管理-表单管理-表单模型”。新增的表单模型在流程使用时将会默认继承内置的表单模型中的字段。

#### 知识流程设计

在知识流程设计功能板块中，已经内置了两条知识流程：知识发布流程和知识停用流程，推荐您使用内置的流程或基于内置流程修改。您也可以新增知识相关的工作流，新增流程时，需要选择流程绑定的表单模型，可选范围为“知识表单模型”中的有效数据。

新增流程后将进入表单设计页面，可以拖动左侧的字段到表单设计画布中，可以在”字段类型“中选择基础的字段添加到表单中。

完成表单设计后，进入知识流程设计页面完成知识流程的编排，并且完成流程设置后可以对编排好的流程进行发布，流程编排的操作同“平台管理-流程管理-流程设计”。流程编排成功并且启用后，该流程即可在后续文章审批上线的场景中使用。

**注意：如果需要实现知识审批后才可发布的场景，则该流程中必须包含审批节点。**

#### 知识工单

点击“服务台管理-知识管理-知识工单”可以查看知识相关的工单列表，点击每一个工单可以查看工单详情或者对工单进行处理。

#### 知识模板

在“知识管理-知识模板”板块中，支持创建多套知识编写模板，并且可针对不同工单转知识的场景设置专属模板。

**新增知识模板**

可以点击“新增”按钮添加模板，新增模板时需要完成以下内容填写：

- 模板名称：该模板显示的名称，方便用户识别
- 工单知识模板：即该模板是否用于工单转建知识的场景，若选择“否”，则为非工单知识场景的通用的知识模板。
- 描述：知识模板的描述说明
- 生效流程：当该模板为“工单知识模板”时，可以选择对哪些流程生效。
- 模板内容：标题即知识的标题模板，内容即知识的正文模板。可以在右侧选择变量插入，如果选择了某个生效流程，则可以选择流程中的具体变量（如表单字段、节点变量等）插入到模板中。

#### 知识通知

在“知识管理-知识通知”板块中，可以设置知识相关的通知模板。系统已经预先内置了两条通知规则模板：知识发布通知和知识停用通知，用户也可以自定义新的知识通知模板。

通知模板的设置方式可以详见 6.6 通知管理的内容。

#### 知识设置

##### 知识流程设置

在知识流程设置功能板块中，您可以绑定知识发布流程和知识停用流程，系统已默认绑定内置的流程，您也可以进行修改。请注意：可选择绑定的流程为知识管理流程设计中已启用的流程，并且流程中请使用内置知识表单模型的字段。

##### AI 同步设置

开启该功能后，可以将 ITSM 中的知识同步到 AIdev 的知识库中，同步成功后，知识可以用于智能问答。

开关开启后，需要选择一个 AI 知识库（该知识库需要提前到 AIdev 中设置好）。可以选择是否开启自动同步，当开启后，知识发布成功后将会自动同步到 AI 同步知识库中。

除自动同步外，也可以手动选择知识后进行同步。

### 使用知识发布流程

当开启知识发布流程功能后，用户在编写完文章并提交发布后，系统将会自动生成一个知识发布审批的工单，该工单可以在“服务台管理-知识管理-知识工单”下查看到。

知识审批人可以从此工单列表中找到待处理的工单，并对工单进行处理，如下图所示。同时，知识作者也可以点击“知识中心-我的文章”中查看到当前文章的发布状态。点击文章的发布历史，可以查看到文章的历史发布记录，并且可以点击每一次发布关联的工单查看到具体的工单详情。

### 知识版本

#### 知识版本编号说明

知识文章版本编号遵循以下格式要求：【主要版本号.次要版本号】

对知识文章的修改类型决定了版本号的增量规则，比如文章每次修改（但未发布时）都会将次要版本号增加 0.01，当文章发布后将主要版本号递增到下一个整数，例如版本 2.02 的文章如果发布后，文章版本号将会变为 3.0。

以下表格示例说明了文章版本的变化规律：

|     |     |     |
| --- | --- | --- |
| **用户行为** | **文章状态** | **版本号** |
| 知识作者创建新文章 | 草稿  | 0.01 |
| 知识作者进行更改并更新文章 | 草稿  | 0.01 |
| 知识作者提交文章以供审批 | 发布中 | 0.02 |
| 知识作者撤回知识工单以进行修改 | 草稿  | 0.03 |
| 知识作者修改后重新提交文章以供审批 | 发布中 | 0.04 |
| 审批人驳回文章发布申请 | 草稿  | 0.05 |
| 知识作者修改后重新提交文章以供审批 | 发布中 | 0.06 |
| 审批人同意文章发布申请 | 审批通过 | 0.07 |
| 文章通过知识发布节点 | 已发布 | 1.0 |
| 知识作者点击编辑文章 | 草稿  | 1.01 |
| 知识作者编辑好文章后提交文章以供审批 | 发布中 | 1.02 |
| 审批人同意文章发布申请 | 审批通过 | 1.03 |
| 文章通过知识发布节点 | 已发布 | 2.0 |

总之，知识在发布过程中任何一次修改（包括状态的变化）都会导致版本的新增。但是发起停用、停用审批、停用成功这些不会导致版本的变化。

#### 查看知识版本

**1、知识工单中查看知识版本**

在知识工单的侧边栏中，可以看到“文章版本”入口，点击每一个版本号可以查看对应版本的内容。

其中，仅发布的版本知识复制，最新发布的版本支持停用，每个版本都支持删除，版本删除后，将不会再显示在版本列表中。点击版本后的复制按钮将会复制该版本的内容重新打开一张知识发布工单，并且版本号在该版本号基础上递增 0.01。如果点击版本后的停用按钮，则会发起该知识的停用申请流程。

**2、知识中心查看知识版本**

在知识中心点击文章查看详情时，如果该文章有多个版本，默认会展示该知识的最新版本，点击版本号可以切换查看历史发布过的版本。仅最新发布的版本支持编辑和停用。

注：知识中心查看知识时，仅显示发布过的版本，处于编辑态的中间版本不会在此处显示。

当查看的文章非最新版本时，会在文章顶部显示该文章有最新发布的版本，可以点击跳转查看。

## 服务台 AI 助手

### 概述

服务台 AI 助手是指通过 AI 能力为服务台的提供的 AI 工具集，通过 AI 能力帮助服务台提升工作效率，降低人工成功，最终提升 IT 服务的满意度。

### 安装服务台智能助手应用

**前提条件：**

请确认您拥有“平台管理-插件管理”模块的功能权限，否则将无法安装应用。若您无法访问该功能界面，请与系统管理员联系获取该模块的功能授权。

登录 IT 服务管理中心后，进入“平台管理-插件管理”模块，找到“服务台智能助手”应用，点击“安装”即可安装服务台智能助手应用，安装成功的应用可以在“服务台管理”菜单下查看到。

### AI 生成知识

#### 配置 AI 生成知识

点击“服务台管理-服务台智能助手-AI 生成知识”，可以配置 AI 生成知识相关的内容，需要配置的内容如下：

- AI 角色：选择在嘉为蓝鲸 AIdev 中预先设置的 AI 角色
- 启停：默认停用，即默认不启用 AI 生成知识的功，如果需要使用可以启用开关
- 描述：对该功能的描述说明。

#### 使用 AI 生成知识

在工单转建知识时，支持通过 AI 小鲸自动转建生成文章草稿，用户也可以基于小鲸生成的内容进行二次编辑后再发布文章。

# 平台管理

## 表单管理

### 表单模型

#### 概述

表单模型是流程设计中非常重要的一步，是后续所有步骤的基础，定义一个清晰的表单模型，不仅能提升流程配置的效率，减少各个功能配置的重复性工作，还有助于后期的相关数据统计，只有结构正确，才能保证复用性和扩展性。

表单模型是具体业务场景的一个基础表，在设计流程之前，可以创建一个表单模型，把某一类业务的通用字段配置在这个表单模型中，后续创建流程的时候，只需要选择这个模型，即可使用模型中已经创建好的字段，不需要再重复创建字段。

#### 配置表单模型

**配置步骤**

1、在表单模型列表页，点击右上角新增按钮，进入表单模型配置页面

2、在表单模型配置页面，填写表单模型名称和描述，然后点击新增字段，进行表单模型的字段配置，配置完成进行保存即可

## 流程管理

流程管理员可以在流程管理模块对流程进行统一定义和管理。该模块提供了可视化的表单和流程设计引擎，非技术人员也可以基于业务逻辑轻松拖拽设计出业务表单和流程，同时可通过触发器模块实现更高阶的自动化场景，另外也可以通过状态管理模块自定义工单状态的流转逻辑。

流程管理中包括流程设计、触发器、状态管理模块：

- 流程设计：通过该模块进行流程的表单设计、流程流转设计以及流程的其他配置。
- 触发器：触发器模块相当于流程的一个自动化工具，它能够在工单的生命周期中发生特定事件时自动触发执行预定义的动作。
- 状态管理：状态管理模块提供了内置的基础状态，同时也提供了灵活的自定义能力，支持根据具体的业务场景定义工单状态的流转逻辑。

### 流程设计

#### 概述

流程设计模块提供了可视化的表单和流程设计引擎，非技术人员也可以基于业务逻辑轻松拖拽设计出业务表单和流程。

在流程设计列表页面，点击右上角的“新增”按钮，填写流程基础信息后，即可进入一个具体的流程设计页面。流程类型和表单模型设置后不可以修改，请注意配置正确。

一个具体的流程设计通常包括表单设计、流程定义、流程其他配置三个步骤，下面进行详细讲述。

#### 表单设计

表单设计是一个具体流程设计的第一步，可以用表单设计器，将流程整体的业务表单先规划设计好，再进行下一步的流程设计。

##### 表单设计器概述

创建流程时填写完流程基础信息后，就进入表单设计页面，表单设计器的具体设计布局如下：

- 字段库：字段库提供了供表单设计所需要的各种类型的字段，当新建流程时选择了表单模型，直接拖入即可编排使用。
- 画布区：画布区用来拖拽编排表单中字段的布局，使其满足业务场景的需要。将左侧字段库中的字段拖入中间画布区，即可进行编排。
- 字段配置：选中画布中某个具体的字段，在右侧字段配置区可以看到该字段支持的属性配置。可以对字段进行名称、提示文字、描述信息、默认值等相关属性的配置。
- 工具栏：表单设计器的工具栏，可以进行撤销、重做操作。

表单设计的一般步骤为：

1.  添加表单字段
2.  调整表单布局
3.  设置字段属性
4.  进行 UI 联动规则配置（可选）
5.  进行数据联动规则配置（可选）
6.  表单样式设置（可选）
7.  预览表单进行确认
8.  保存并进行下一步流程设计

##### 表单字段说明

当前字段库中的字段如下：

**1、字段类型**

即提供表单设计中会用到的原始字段类型，包括：

- 基础字段：单行文本、多行文本、数值、单选框、复选框、单选下拉、多选下拉、单选级联、多选级联、日期、日期时间、时间范围、富文本、单选人员、多选人员
- 高级字段：分组、子表单、任务、标签页、附件、单选用户组、多选用户组、单选 CMDB 业务、多选 CMDB 业务、计算字段、链接、子流程表单、嵌套表格、单选配置项、多选配置项
- 自定义字段：当所提供的字段类型不满足需求时，还支持通过扩展开发框架扩展的其他字段类型

##### 特殊字段使用说明

**1、任务字段**

**场景：**用于实现在流程过程中创建任务待办的场景，如故障处理任务，问题调查任务

**字段配置**

1.  在表单中拖出任务字段，字段内置有任务名称、处理人、状态三个字段，如果需要添加其他字段，可以从左侧字段库中拓展插入

任务字段除了其他基础配置，还有四个特殊的配置项可以配置：

- 任务处理人字段：绑定处理人字段，可选字段类型为人员类型和用户组类型，如果内置的处理人字段类型不满足业务场景，可以添加其他处理人字段
- 进入待办状态：设置任务处于什么状态的时候，进入处理人的待办队列
- 消除待办状态：设置任务处于什么状态的时候，消除任务待办

- 自定义 Class：通过脚本方式，设置任务配置中设置任务这个字段的个性化样式。
    - 自定义的样式需要在表单设置的整体页面进行添加，然后在任务字段中选择对应自定义 Class

1.  在流程节点中，可以配置各个节点中任务字段中的每个字段状态，也可以勾选该节点是否支持相关操作：

- 创建任务：勾选后：支持创建新任务；
- 批量导入：勾选后，支持通过 Excel 批量导入任务；
- 编辑已有任务：勾选后，支持编辑当前任务中的信息；
- 删除已有任务：勾选后，已经存在的任务可以删除；
- 任务处理完成当前节点才允许提交：勾选后，必须该任务字段中的所有任务都处理完成（即非待办的状态）才可以提交当前节点继续往下流转。

**使用任务字段**

1.  创建任务

在任务字段左上角点击“创建任务”按钮，即可创建任务，创建完需要点击节点的提交按钮，任务才算创建成功。

2、处理任务

——任务处理人视图

任务处理人可以看到工单，但是只能处理自己的任务，不能修改工单中的其他信息

——节点处理人视图

节点处理人可以看到所有的任务列表，可以直接在列表上进行任务信息的编辑

##### UI 规则联动设置

UI 规则联动是指通过设置字段的匹配条件（等于、不等于、包含、不包含等），来触发其他字段状态属性的变化（隐藏、可编辑、只读、必填），从而实现表单字段的动态联动。如：需要配置当“事件是否解决”=“否”时，“未解决原因”为必填，即可使用该功能进行配置。

在表单设计页面点击画布右上角的“表单设置”，然后在右侧的表单设置处点击 UI 规则联动的“设置”按钮，即可打开 UI 规则联动的配置页面

进入 UI 规则联动的配置页面，点击左上角的“新增规则”按钮，即可添加一条新的规则配置框进行配置。规则的配置包括触发条件和执行动作两部分，可以根据实际的业务场景配置满足什么条件时触发什么动作。

##### 数据联动设置

数据联动是指表单中某个字段的值会随其他字段或变量值的变化而变化。

在表单设计页面点击画布右上角的“表单设置”，然后在右侧的表单设置处点击数据联动的“设置”按钮，即可打开数据联动的配置页面

进入数据联动的配置页面，点击左上角的“新增规则”按钮，即可添加一条新的规则配置框进行配置。

数据联动规则的配置有三种类型

1.  **数据表联动配置**

**适用场景：**需要根据表单中某几个字段的值的填写自动查询出其他相关信息

**场景案例：**在如下表单中，希望选择一个省份之后，可以自动带出对应的邮编和所属区域

**配置步骤：**

①首先维护一张省份信息数据表如下（具体的数据表创建步骤见平台管理/集成中心/数据表模块的介绍）：

②进入表单设计器中的数据联动配置页面添加一条数据联动规则

- 数据来源：选择数据表，选中维护好的目标数据表
- 条件输入：设置查询条件的映射关系（💡注意：相同类型的字段才可以做映射，故这里要先选择数据表的字段，才可以选输入变量，变量会根据类型进行过滤）
    - 数据表字段：选择数据表中要作为查询条件的字段
    - 输入变量：当前工单的相关变量，包含表单字段和系统变量，选择一个和数据表中的查询字段做映射（注意相同类型的字段才可以做映射，故这里要先选择）

该场景是通过“省份”字段查询其他信息，故配置输入变量为表单中的“省份”字段，去映射数据表中的“省份”字段。（💡注意：由于数据的查询是用 key 去匹配的，故这两个地方的省份数据源要来源于同一个数据字典才可以）

- 触发联动：设置表单中的哪些字段要从数据表中查询，并设置映射关系。

该场景是查询“邮编”和“所属区域”，故选择表单中的这俩字段和数据表中的邮编、所属区域配置映射即可

1.  **决策表联动配置**

**适用场景：**表单中某个字段的值可以根据一定的业务规则逻辑自动带出。如：根据紧急程度和影响范围的不同，自动带出优先级；根据事件分类自动带出处理组和处理人。

**场景案例：**在事件管理流程中，希望选择事件分类之后，可以自动分派处理组和处理人

**配置步骤：**

①首先维护一张事件分配策略的决策表如下（具体的决策表创建步骤见平台管理/规则管理/决策表模块的介绍）：

②进入表单设计器中的数据联动配置页面添加一条数据联动规则

- 数据来源：选择决策表，选中维护好的目标决策表
- 条件输入和触发联动的配置同前面的数据表联动配置一样，该案例的具体配置如图：

1.  **动作联动配置**

**适用场景：**数据联动的数据源来源于外部系统时，可以通过动作管理模块将对应接口接入，通过动作联动来配置实现

**场景案例：**在事件管理表单中，选择报告人之后，可以从平台用户管理接口中查询到电话和邮箱自动填入

**配置步骤：**

①首先在动作管理模块接入对应的接口（具体的动作创建步骤见平台管理/集成中心/动作管理模块的介绍）：

②进入表单设计器中的数据联动配置页面添加一条数据联动规则

- 数据来源：选择动作，选中维护好的目标动作
- 条件输入：配置动作中的输入参数映射，可以自定义输入值或引用变量，引用变量可以选择表单字段或系统变量
- 触发联动：配置和数据表联动一样，区别是从接口的返回参数中选择映射

##### 表单样式设置

表单样式设计支持配置人员对工单表单的上的标题对齐方式设置，并且可以通过提供的自定义样式能力编写 CSS，对字段的大小、颜色等属性进行个性化设置。

在表单设计页面点击画布右上角的“表单设置”，然后在右侧的表单设置处可以看到有标题对齐方式和自定义样式的设置。

**1、标题对齐方式设置**

标题对齐方式提供了顶部对齐、左对齐、右对齐三种方式，效果如下：

1.  **自定义样式设置**

- 配置样式

点击“编辑自定义样式”进行样式添加

自定义样式的设置通过 css 编写，系统会自动将所写的类名提取出供选择使用，样式的优先级和编写的 css 代码有关

- 使用样式

在表单设置处的“自定义 class”中选择配置的样式，即可对整体表单生效；在具体的某个字段属性配置中设置“自定义 class”，即可对单个字段生效。

系统会默认将表单样式表中配置的类名取出供选择

##### 表单校验设置

我们在设计表单的时候，经常需要对用户输入的数据进行校验，产品中除了可以在单个字段的字段配置处设置一些基础的校验（如必填、数值范围、时间范围、字数、格式-正则等）之外，还提供了专门的表单校验模块，支持做一些更灵活的字段组合条件校验以及和外部系统的关联校验，确保数据的准确性和完整性。

在表单设计页面点击画布右上角的“表单设置”，然后在右侧的表单设置处点击表单校验的“设置”按钮，即可打开表单校验的配置页面

进入表单校验的配置页面，点击左上角的“新增规则”按钮，即可添加一条新的规则配置框进行配置。

校验不通过时，支持设置阻断提交或仅做提示

- 阻断提交：不允许提交表单
- 仅做提示：会提示不符合规则，但是可以继续提交表单

表单校验的配置支持三种方式：

1.  **表单设置**

表单设置的方式指通过规则条件配置的方式，设置表单中多个字段或系统变量的组合条件校验：如“字段 1 包含 xx”且“字段 2 等于 xx”时，进行校验提示。

**触发条件：**

通过规则配置的方式设置触发校验提示的条件

**校验设置：**

- 满足触发条件时
    - 阻断提交：不允许提交表单
    - 仅做提示：仅提示不符合规则，但是可以继续提交表单
- 提示内容：设置要提示的内容文案
- 提示字段：选择要在哪个字段上进行提示

1.  **引用动作**

通过动作校验的使用场景如下：

①需要和外部进行联合校验的场景：例如重复、存在、正确与否等等

②通过接口满足一些复杂的校验场景

**输入参数：**

选择一个具体动作之后，配置输入参数，可以直接填值或者引用变量。

**校验设置：**

- 结果参数：选择一个返回参数作为校验结果判断的参数，校验通过和不通过的返回值必须为：TRUE（通过）、FALSE（不通过），可选参数类型为布尔类型

注：若返回值为空，当做不通过处理；若返回值为其他值，当做通过处理

- 满足触发条件时
    - 阻断提交：不允许提交表单
    - 仅做提示：仅提示不符合规则，但是可以继续提交表单
- 提示内容：设置要提示的内容文案，可以在这里直接输入，或者选择一个返回参数的值作为提示内容，只能选择字符串类型的参数
- 提示字段：选择要在哪个字段上进行提示

1.  **自定义 JS**

通过自定义 JS 的方式进行校验设置时，校验是否阻断提交、提示内容以及提示字段的设置，都在 JS 脚本中进行设置。

##### 表单预览

点击右上方的“预览”按钮，可以对当前编排的表单进行预览，检查配置是否有问题。

#### 流程设计

在表单设计完成之后，进入到流程设计的步骤

##### 流程设计概述

产品提供了可视化的流程设计器，通过拖放节点和网关来编排流程。编排好流程后可以配置节点处理人、操作按钮和字段状态。流程设计器具体布局说明如下：

- 节点类型：目前支持开始/结束事件、手动节点、审批节点、自动节点、子流程、分支网关、并行网关、并行条件网关、汇聚网关、决策节点。
- 流程画布：在该区域编排流程图，为节点配置处理人、操作按钮和字段状态等。
- 画布工具栏：支持流程图放大、缩小、全屏、撤回、重做。

**流程设计的一般步骤为：**

1.  添加节点到流程画布
2.  在画布中进行流程连线编排
3.  配置节点信息：处理人、按钮、字段状态、条件网关的条件等（不同类型的节点配置项不同）

##### 流程节点介绍

|     |     |
| --- | --- |
| **节点名称** | **说明** |
| 开始事件 | 启动流程的开始事件，流程图中必须包含开始事件。一个流程中只有一个开始事件。 |
| 结束事件 | 流程的结束事件，流程图中必须包含结束事件。一个流程中可以根据不同的流转路径配置多个结束事件。 |
| 手动节点 | 在流程中需要人工处理的任务节点。可以为其配置处理人、支持的操作、字段状态 |
| 审批节点 | 带有审批属性的节点，有同意和拒绝两种结论。可以为其配置审批人、支持的操作、字段状态；还可以配置一些审批情况后的自动动作； |
| 自动节点 | 自动节点用于不需要人工干预的，可以由系统自动执行的任务节点。通常用于执行一些预定义的、重复性的或者无需用户决策的工作。如实现系统间的自动化交互。 |
| 子流程 | 当一个流程比较复杂的时候，可以将其拆分成多个子流程，可以更清晰地进行管理 |
| 派单节点 | 派单节点适用于先派单再处理的场景，流程到达派单节点，由派单人进行工单分派之后，处理人再进行处理提交 |
| 标准运维节点 | 标准运维节点是和平台标准运维产品结合，允许流程到达某个节点之后，执行标准运维中的任务。 |
| 发送通知 | 发送通知节点用于配置到达某个环节给相关人员发送通知。 |
| 分支网关 | 允许流程在不同的路径之间做出选择，根据某些条件或决策点来决定下一个执行的路径。分支网关的最终执行路径只有一条，当满足多个路径的条件时，会走优先级最高的分支 |
| 并行网关 | 允许流程在多个路径上并行执行，所有路径同时开始，然后等待所有路径完成后再继续。并行网关需要配合汇聚网关使用。 |
| 并行条件网关 | 与并行网关不同的是，并行条件网关中的每条路径都有条件配置，满足条件后才可以到达。与分支网关不通的是，并行条件网关满足多个路径的条件时，满足条件的路径需要同时执行。 |
| 汇聚网关 | 配合并行网关和并行条件网关使用，在并行路径完成的地方添加汇聚网关。 |
| 决策节点 | 决策节点需要配合决策表使用，通常用于一些预先定义好的规则，实现一些场景的自动化，提高工单处理效率。如通过决策表预先定义好不同事件分类对应的处理人，在流程中通过决策节点来关联决策表输出具体的处理人值。 |

操作介绍

<div class="joplin-table-wrapper"><table><tbody><tr><td><p><strong>操作</strong></p></td><td><p><strong>操作说明</strong></p></td></tr><tr><td><p>提交</p></td><td><p>提交当前表单信息（手动节点才有），点击后流程继续流转。</p><p>当表单信息确认填写完成后，可以进行提交，让流程继续往下流转。</p></td></tr><tr><td><p>更新</p></td><td><p>更新当前表单信息，和提交不同，点击后只是更新表单信息，流程不会继续往下流转。</p><p>当工单处理人只是填写了部分信息，想要更新给用户看，但暂不需要提交至下一节点时，可以点击更新</p></td></tr><tr><td><p>保存</p></td><td><p>保存当前任务中填写的内容，下次进来继续填写。保存的内容并不会被正式更新，有处理权限的用户才可见。</p></td></tr><tr><td><p>认领</p></td><td><p>当工单被分派到某一范围内的用户时，用户可以主动认领当前任务。对于启用了认领功能的节点，要认领后才可以进行处理</p></td></tr><tr><td><p>转单</p></td><td><p>当工单处理人无法亲自处理工单时，可以将工单转派给他人处理</p></td></tr><tr><td><p>退回</p></td><td><p>工单当前节点的处理人对工单历史节点的处理情况有异议时，可将工单回退给历史节点处理人进行处理。</p></td></tr><tr><td><p>审批</p></td><td><p>审批节点的审批按钮有”同意“和”拒绝“，点击同意和拒绝都会提交当前表单信息，提交后流程继续往下流转</p></td></tr><tr><td><p>加签</p></td><td><p>为当前审批节点添加审批人（审批节点才有）</p><p>当前审批任务需要其他成员审批时，可以进行加签操作来添加审批人，加签支持前加签和后加签。</p><ul><li>前加签：被加签人审批后，我才可以审批</li><li>后加签：我审批之后，被加签人才可以审批</li></ul></td></tr><tr><td><p>重试/手动执行</p></td><td><p>当自动节点的自动任务执行失败时，可以点击重试或手动执行</p><ul><li>重试：再次触发自动任务的执行</li><li>手动执行：自动执行始终无法成功时，可以使用手动执行，自行填写输出参数后提交</li></ul></td></tr><tr><td><p>撤回</p></td><td><p>工单流程中上一个历史节点的处理人需要重新处理历史节点工单时，可以进行撤回。可撤回的前提是下一节点还未处理，若下一节点已经处理，就不可以进行撤回。</p></td></tr><tr><td><p>挂起/恢复</p></td><td><ul><li>挂起：当工单暂时不需要处理工单时，可将选择挂起工单。</li><li>恢复：当前工单需要继续处理时，可以点击恢复工单</li></ul></td></tr><tr><td><p>关闭</p></td><td><p>若工单内容已经被提前解决，不需要按照既定流程继续跑完时，可提前关闭工单。关闭工单后，工单则结束，不在继续往下走。</p></td></tr><tr><td><p>终止</p></td><td><p>若工单内容由于某些原因不需要完成，可以进行终止。终止工单后，工单则结束，不在继续往下走。</p></td></tr><tr><td><p>重新打开</p></td><td><p>工单流转到结束状态后，因为某些原因需要重新流转，可以进行重新打开。重新打开后工单从提单节点之后重新开始流转。</p></td></tr><tr><td><p>自定义按钮（关联单）</p></td><td><p>通常用于事件转问题，事件转变更等场景，需要将当前事件单据转建为问题单，希望自动填入事件单中的相关信息，就可以在流程自定义按钮下配置关联单的按钮。</p></td></tr></tbody></table></div>

###### 开始事件&提单节点

启动流程的开始事件，流程图中必须包含开始事件。一个流程中只有一个开始事件。

流程初始设计会自动包含开始事件，并且自带提单节点，不可删除。点击提单节点，可以进行节点的操作按钮和字段配置

1.  **操作按钮配置**

点击提单节点，选中“操作按钮”页签，进行操作按钮的配置。启用后到达节点才可以看到相关的操作

操作说明：

|     |     |
| --- | --- |
| **操作** | **操作说明** |
| 提交  | 提单操作，提交后流程进入下一节点。 |
| 保存草稿 | 当前表单内容未填写完成时，可以点击”保存草稿“，将所填内容存到草稿箱，下次可以在”我的草稿“列表中，打开对应工单填写完成后提交。 |
| 保存模板 | 将当前所填信息保存为模板，下次使用相同的流程提单时，选择使用模板填写，即可快速填写表单。 |

1.  **字段配置**

点击提单节点，选中“字段配置”页签，进行该节点表单字段状态的配置。详见节点字段状态配置说明

###### 结束事件

流程的结束事件，流程图中必须包含结束事件。一个流程中可以根据不同的流转路径配置多个结束事件。结束事件无需进行其他配置。

**工单结束后字段状态说明：**

工单结束后会默认展示所有字段，并且为只读状态，但配置的表单 UI 规则联动仍会生效。比如：配置的事件已解决时，隐藏“未解决原因”、如果工单到达结束状态，“事件是否解决”字段的值为“是”，则不会显示“未解决原因”字段

###### 手动节点

在流程中需要人工处理的任务节点。可以为其配置处理人、支持的操作、字段状态

1.  **处理人配置**

点击节点卡片，选中“处理人”页签，配置该节点的处理人，支持指定人员、指定用户组、表达式 3 种中方式，并且可以引用表单字段、系统变量和节点变量的相关对象作为处理人。

**多人处理方式有并行和协同两种：**

**①指定人员时：**

- 协同：一名用户处理即可
- 并行：所有用户均需要处理，同时进行

假设引用了变量，选择了两个人员变量，变量 A 的值有用户 1、2，变量 B 的值有用户 3、4，则：

- 协同：用户 1/2/3/4 任意一个用户处理即可
- 并行：用户 1/2/3/4 都需要处理

**②指定用户组时：**

- 协同：任意一个用户组中任意一个用户处理即可
- 并行：所有用户组均需要处理，每个用户组中只要一个人处理即可，同时进行

假设引用了变量：选择了两个用户组变量，变量 A 的值有用户组 1、2，变量 B 的值有用户组 3、4

- 协同：用户组 1/2/3/4 任意一个用户组中任意一个人处理即可
- 并行：用户组 1/2/3/4 都需要处理，每个用户组中只要一个人处理即可，同时进行

1.  **操作按钮配置**

点击节点卡片，选中“操作按钮”页签，进行操作按钮的配置。启用后到达节点才可以看到相关的操作

操作说明：

<div class="joplin-table-wrapper"><table><tbody><tr><td><p><strong>操作</strong></p></td><td><p><strong>操作说明</strong></p></td></tr><tr><td><p>提交</p></td><td><p>提交当前表单信息（手动节点才有），点击后流程继续流转。</p><p>当表单信息确认填写完成后，可以进行提交，让流程继续往下流转。</p></td></tr><tr><td><p>更新</p></td><td><p>更新当前表单信息，和提交不同，点击后只是更新表单信息，流程不会继续往下流转。</p><p>当工单处理人只是填写了部分信息，想要更新给用户看，但暂不需要提交至下一节点时，可以点击更新</p></td></tr><tr><td><p>保存</p></td><td><p>保存当前任务中填写的内容，下次进来继续填写。保存的内容并不会被正式更新，有处理权限的用户才可见。</p></td></tr><tr><td><p>认领</p></td><td><p>当工单被分派到某一范围内的用户时，用户可以主动认领当前任务。对于启用了认领功能的节点，要认领后才可以进行处理</p><ul><li>可认领工单的人员范围为配置的处理人范围</li><li>未认领前，不可以进行提交、保存、更新、退回和挂起操作</li></ul></td></tr><tr><td><p>转单</p></td><td><p>当工单处理人无法亲自处理工单时，可以将工单转派给他人处理。</p><ul><li>设置转单范围：设置转单时可选的人员范围</li></ul><p></p></td></tr><tr><td><p>退回</p></td><td><p>工单当前节点的处理人对工单历史节点的处理情况有异议时，可将工单回退给历史节点处理人进行处理。</p><ul><li>设置允许退回节点：设置可以退回到哪些节点（目前只提供了“前置所有节点”的选项）</li></ul><p></p><ul><li>退回后重新提交：设置退回后重新提交流程的流转方式（当前只做了按流程线条流转，即从退回的节点按照流程路径重新进行一步步的流转）</li></ul><p></p></td></tr></tbody></table></div>

1.  **字段配置**

点击节点卡片，选中“字段配置”页签，进行该节点表单字段状态的配置。详见节点字段状态配置说明

###### 审批节点

带有审批属性的节点，有同意和拒绝两种结论。可以为其配置审批人、支持的操作、字段状态

1.  **审批对象配置**

点击节点卡片，选中“审批对象”页签，配置该节点的审批对象，支持指定人员、指定用户组、表达式 3 种中方式，并且可以引用表单字段、系统变量和节点变量的人员相关对象作为审批对象

**多人审批方式说明：**

**①指定人员时：**

**依次审批（按顺序依次审批）：**所有审批人都需要审批，按顺序进行，所有审批人都审批完当前节点才流转

——节点审批结果值为"通过"：所有人都点”同意“，

——节点审批结果值为"不通过"：有任何一个人点”拒绝“

**或签（一名审批人同意即可）：**只要有一个人审批了，当前节点就流转

——节点审批结果为"通过"：一个审批人点了”同意“

——节点审批结果为"拒绝"：一个审批人点了”拒绝“

**会签（需所有审批人同意）：**所有审批人都需要审批，无需按顺序进行，所有审批人都审批完当前节点才流转

——节点审批结果为"通过"：所有人都点”同意“

——节点审批结果为"拒绝"：有任何一个人点”拒绝“

**②指定用户组时：**

**依次审批（按顺序依次审批）：**所有用户组都需要审批（每个用户组中任意一个用户审批即可），按顺序进行，所有用户组都审批完当前节点才流转、

——节点审批结果值为"通过"：所有人都点”同意“，

——节点审批结果值为"不通过"：有任何一个人点”拒绝“

**或签（一名审批人同意即可）：**只要有一个人审批了，当前节点就流转

——节点审批结果为"通过"：一个审批人点”同意“

——节点审批结果为"拒绝"：一个审批人点”拒绝“

**会签（需所有审批人同意）：**所有用户组都需要审批（每个用户组中任意一个用户审批即可），无需按顺序进行，所有用户组都审批完当前节点才流转

——节点审批结果为"通过"：所有人都点”同意“

——节点审批结果为"拒绝"：有任何一个人点”拒绝“

**2、操作按钮配置**

点击节点卡片，选中“操作按钮”页签，进行操作按钮的配置。启用后到达节点才可以看到相关的操作

操作说明：

<div class="joplin-table-wrapper"><table><tbody><tr><td><p><strong>操作</strong></p></td><td><p><strong>操作说明</strong></p></td></tr><tr><td><p>同意</p></td><td rowspan="2"><p>个人审批的结果，点击同意和拒绝都会提交当前表单信息，提交后流程继续往下流转</p></td></tr><tr><td><p>拒绝</p></td></tr><tr><td><p>更新</p></td><td><p>更新当前表单信息，和提交不同，点击后只是更新表单信息，流程不会继续往下流转。并且更新不会校验必填项</p><p>当工单处理人只是填写了部分信息，想要更新给用户看，但暂不需要提交至下一节点时，可以点击更新</p><p></p></td></tr><tr><td><p>保存</p></td><td><p>保存当前任务中填写的内容，下次进来继续填写。保存的内容并不会被正式更新，有处理权限的用户才可见。</p></td></tr><tr><td><p>转单</p></td><td><p>当工单处理人无法亲自处理工单时，可以将工单转派给他人处理</p></td></tr><tr><td><p>退回</p></td><td><p>工单当前节点的处理人对工单历史节点的处理情况有异议时，可将工单回退给历史节点处理人进行处理。</p></td></tr><tr><td><p>加签</p></td><td><p>为当前审批节点添加审批人（审批节点才有）</p><p>当前审批任务需要其他成员审批时，可以进行加签操作，加签支持前加签和后加签。</p><ul><li>加签位置<ul><li>前加签：被加签人审批后，我才可以审批</li><li>后加签：我审批之后，被加签人才可以审批</li></ul></li><li>加签审批人范围：加签时允许选择的人员范围</li></ul><p></p></td></tr></tbody></table></div>

**3、字段配置**

点击节点卡片，选中“字段配置”页签，进行该节点表单字段状态的配置。详见节点字段状态配置说明

1.  **高级设置**

点击“审批节点”卡片，选中“高级设置”页签，对于审批拒绝后的自动操作以及自动审批设置进行配置；

- 审批拒绝设置
    - 审批节点最终结果为“不通过”时，自动终止单据：
        - 开启时，若当前工单在当前审批节点被拒绝后，该工单流转到终止状态并且关闭该工单，原因自动填充为“审批被拒绝，单据已终止”
- 自动审批设置
    - 提单人自动同意
        - 开启时，若审批人为提单人时，无需手动审批，系统将自动同意，并将审批意见填写为：提单人自动审批同意
    - 已审批过的自动同意
        - 历史节点中审批通过时，无需手动审批，系统将自动同意，并将审批意见填写为：提单人自动审批同意

###### 自动节点

自动节点用于不需要人工干预的，可以由系统自动执行的任务节点。通常用于执行一些预定义的、重复性的或者无需用户决策的工作。如实现系统间的自动化交互。

点击节点卡片进行自动节点的配置

- 紧急处理人：当自动节点执行失败时，紧急处理人可以进行重试或手动处理
- 选择动作：这里可选的动作都是平台管理/集成中心/动作管理中的动作
- 输入参数：选择动作后，配置动作中相关的输入参数，可以引用表单字段、系统和节点变量
- 输出参数：输出参数无需配置，如果后续想引用输出参数为变量，则可以勾选对应参数的“引用为变量”
- 自定义变量：

自定义变量用于对动作的输出参数进行再加工，灵活适配不同场景对于变量的诉求。

如：

1、接口输出的结果是列表\["admin","18","xxxx"\]，可以加工成字符串：admin,18,xxx

2、对参数进行计算：\[10,12\]->22

**配置变量**

点击新增，填写相关信息，保存即可

- 变量名：变量的名称
- 变量标识：变量的标识 key
- 节点标识：当前这个节点的标识
- 类型：变量的数据类型，根据使用场景配置正确的类型，否则在具体引用的时候可能会选不到
- path：数据的路径
- 表达式：自定义变量是通过 FEEL 表达式来编辑的，FEEL 表达式的说明待补充

**变量测试**

配置完变量之后，可以通过测试功能验证变量输出结果是否符合预期。填写输出参数，点击“执行”，即可看到具体的输出信息

- 输出参数：这里的输出参数是填写动作中输出参数的值进行测试。（注意：这里填的是输出参数，不是输入参数，测试的时候直接拿输出参数来测试这个变量的输出结果，不会通过输入参数再去调用动作执行的）
- 输出信息：执行后的结果

###### 子流程

当一个流程比较复杂的时候，可以将其拆分成多个子流程，可以更清晰地进行管理。不过当前版本中的子流程还是和当前流程属于同一个工单，不会发起新的工单。

点击子流程展开，即可进行里面具体流程节点的配置。子流程中也要包含开始和结束节点。

###### 子流程处理

如果表单中配置了“子流程表单”类型的字段，如果希望子流程表单中的各子单据在某节点处理完后可以自动提交到下一个节点，则可以配置该子流程处理节点，在该节点配置中，需要先选择需要绑定的“子流程表单”类型的字段。

###### 派单节点

派单节点适用于先派单再处理的场景，流程到达派单节点，由派单人进行工单分派之后，处理人再进行处理提交。可以为其配置处理人、支持的操作、字段状态

派单节点单独使用没有效果，需要要配合手动节点一起使用

1.  **处理人配置**

点击派单节点卡片，选中“处理人”页签，配置该节点的处理人。这里配置的处理人是当前派单节点有派单权限的人（也就是派单人），由派单人进行分派下个节点的处理人。（当前可派单的人员范围还不支持自定义，默认是所有用户）。

派单节点设置好之后，后面的手动节点处理人需要引用派单节点的“受派人”变量

如下场景：事件分配-事件处理

派单节点之后的“事件处理”节点处理人要引用派单节点的“受派人”变量，设置后到达该节点，处理人则自动为派单节点分派的处理人

1.  **操作按钮**

点击节点卡片，选中“操作按钮”页签，进行操作按钮的配置。启用后到达节点才可以看到相关的操作

操作说明：

|     |     |
| --- | --- |
| 派单  | 分派他人处理工单 |
| 转单  | 当工单处理人无法亲自处理工单时，可以将工单转派给他人处理 |
| 退回  | 工单当前节点的处理人对工单历史节点的处理情况有异议时，可将工单回退给历史节点处理人进行处理。 |

1.  **字段配置**

点击节点卡片，选中“字段配置”页签，进行该节点表单字段状态的配置。详见节点字段状态配置说明

###### 标准运维节点

标准运维节点是和平台标准运维产品结合，允许流程到达某个节点之后，执行标准运维中的任务。

点击节点卡片进行标准运维节点的配置：

- 流程类型：可以选择标准运维中的公共流程或者某个项目中的流程
- 执行方案：所选流程对应的执行方案，从标准运维中选择的
- 执行人：以谁的身份进行执行（确保执行人有对应标准运维流程的执行权限）
- 流程继续流转条件：可以设置当前标准运维任务同步还是异步执行
- 输入参数：选择流程后，配置动作中相关的输入参数，可以引用表单字段、系统和节点变量
- 输出参数：输出参数无需配置，如果后续想引用输出参数为变量，则可以勾选对应参数的“引用为变量”

###### 发送通知节点

发送通知节点用于配置到达某个环节给相关人员发送通知。

- 通知对象：谁可以收到该通知
- 通知渠道：通过什么渠道发送通知，如邮件、微信（这里的通知渠道是和平台对接的）
- 通知内容：发送通知的具体内容

###### 分支网关

分支网关允许流程在不同的路径之间做出选择，根据某些条件或决策点来决定下一个执行的路径。分支网关的最终执行路径只有一条，当满足多个路径的条件时，会走优先级最高的分支

###### 并行网关

并行网关允许流程在多个路径上并行执行，所有路径同时开始，然后等待所有路径完成后再继续。并行网关需要配合汇聚网关使用。

###### 并行条件网关

并行条件网关与并行网关不同的是，并行条件网关中的每条路径都有条件配置，满足条件后才可以到达。与分支网关不通的是，并行条件网关满足多个路径的条件时，满足条件的路径需要同时执行。

###### 汇聚网关

配合并行网关和并行条件网关使用，在并行路径完成的地方添加汇聚网关，再连接下一个节点

###### 决策节点

决策节点需要配合决策表使用，通常用于一些预先定义好的规则，实现一些场景的自动化，提高工单处理效率。

如：通过决策表预先定义好不同事件分类对应的处理人，在流程中通过决策节点来关联决策表输出具体的处理人值。下面进行该示例的配置说明：

首先在决策表模块配置好事件分配策略的决策表

然后在流程中添加一个决策节点

点击决策节点进行配置，选择刚刚配置好的“事件分配策略”决策表，进行输入条件的配置，这里选择表单中的事件分类字段和决策表中的事件分类字段对应

在事件受理环节，处理人配置引用变量，选择决策节点的输出变量“处理人”即可。

###### 知识发布节点

**前提：使用知识发布节点，请先安装知识管理应用，并且在知识流程设计中使用该节点。**

在“知识管理-知识流程设计”中，编排知识管理流程时，可以拖动

##### 节点字段状态说明

在配置字段时，可以设定 4 个状态和 1 个必填验证

- 可编辑
- 禁用
- 只读
- 隐藏(不勾隐藏则为显示)
- 必填（可编辑时必须校验）

注意：隐藏字段的值不会被提交更新

它们之间的优先级是：隐藏>只读>禁用>必填>可编辑，系统中在多个地方都有表单字段状态和必填校验的相关配置，当多个地方同时配置的时候，【节点字段配置】和【UI 规则联动配置】的叠加取优先级高的，覆盖字段配置处的。

例：对于一个字段 A，节点 2 在节点的字段配置处配置了隐藏，表单的 UI 规则联动处配置了满足条件可编辑，那由于隐藏的优先级大于可编辑，则到达节点 2 时，就算满足可编辑条件，字段 A 也是隐藏的。

如下 3 个地方都可以配置字段的状态和必填校验

1、表单设计器的字段配置项处

2、表单的 UI 规则联动设置

3、节点的字段配置处

##### 节点按钮高级设置

点击节点卡片，选中“操作按钮”页签，可以对节点按钮进行高级设置

- 名称：可自定义按钮名称及多语言名称（支持中文简体、中文繁体、英文）
- 按钮样式：可自定义按钮演示
- 可用条件：命中可用条件时，按钮显示；未命中可用条件时，按钮隐藏
- JS 脚本：可写入自定义 JS 脚本，点击按钮时触发执行

参考示例（建议结合 AI 使用）：

#### 流程其他配置

表单和流程设计完成后，到第三步“流程设置”，可以进行一些其他的配置。

1.  **工单按钮**

提供和工单相关的其他按钮配置

<div class="joplin-table-wrapper"><table><tbody><tr><td><p><strong>操作</strong></p></td><td><p><strong>操作说明</strong></p></td></tr><tr><td><p>撤回</p></td><td><p>工单流程中上一个历史节点的处理人需要重新处理历史节点工单时，可以进行撤回。可撤回的前提是下一节点还未处理，若下一节点已经处理，就不可以进行撤回。</p><ul><li>允许发起撤回的节点：配置工单到达什么节点允许发起撤回。假设勾选了“事件处理”节点，那工单到达事件处理节点还没提交前，允许撤回，假设没勾选则不允许撤回</li></ul><p></p></td></tr><tr><td><p>挂起/恢复</p></td><td><ul><li>挂起：当工单暂时不需要处理工单时，可将选择挂起工单。</li><li>恢复：挂起的工单需要继续处理时，可以点击恢复工单</li></ul></td></tr><tr><td><p>关闭</p></td><td><p>若工单内容已经被提前解决，不需要按照既定流程继续跑完时，可提前关闭工单。关闭工单后，工单则结束，工单状态为“已完成”，不再继续往下走。</p></td></tr><tr><td><p>终止</p></td><td><p>若工单内容由于某些原因不需要完成，可以进行终止。终止工单后，工单则结束，工单状态为“终止”，不再继续往下走。</p></td></tr><tr><td><p>重新打开</p></td><td><p>工单流转到结束状态后，因为某些原因需要重新流转，可以进行重新打开。重新打开后工单从提单节点之后重新开始流转。</p></td></tr><tr><td><p>催办</p></td><td><p>当觉得处理进度不达预期时，可以点击催办，催促处理人，点击后处理人会收到工单催办通知。（需要手动去通知管理模块设置并启用工单催办通知）</p></td></tr></tbody></table></div>

**2、自定义按钮**

当前的自定义按钮提供了支持关联单场景、自定义 JS 两类按钮配置。

- 针对事件转问题，事件转变更等场景，需要将当前事件单据转建为问题单，希望自动填入事件单中的相关信息，就可以在流程自定义按钮下配置关联单的按钮；
- 针对工单页面跳转、表单字段调整等场景，需要在工单详情页通过 JS 脚本实现，可以在流程自定义按钮下配置自定义 JS 按钮并写入 JS 脚本。

页面跳转 JS 脚本参考示例（建议结合 AI 使用）：

**自定义按钮配置**

点击“添加自定义按钮”，即可添加一个按钮配置框，当前提供的仅有关联单按钮，所以不用选择按钮类型。

- 按钮名称设置：点击按钮配置框左上角的名称旁边的，即可进行按钮名称的修改。
- 关联流程设置：如需要事件转问题，就在事件管理流程中配置问题关联单，管理流程选择问题管理流程。
- 字段映射设置：配置创建关联单时需要自动填入的字段值映射关系。

**自定义按钮使用**

自定义按钮配置之后，在工单中会出现对应的按钮，点击按钮

点击按钮后会打开配置的关联流程的提单页面，会根据配置的字段映射关系自动填入相关值，填写好表单内容提交后，关联单则创建成功

创建的关联单可以在工单详情侧边的关联单列表中看到

#### 流程测试

在编辑流程并进入”流程设置“模块后，在发布流程前可以点击右上角”测试“按钮对当前编排的流程版本进行测试。启用中的流程也支持进行流程测试，历史版本不支持测试。

点击“测试”按钮后，会打开一个模拟提单的页面，如下图所示，流程测试时可以选择提单用户，即会模拟选择的提单用户去进行工单的提交。

流程测试时，有以下注意事项：

1.  测试工单的处理人按照流程设计分派，但不会显示在用户的工单列表；
2.  您可以在测试工单的“通知记录”中查看通知发送情况，但测试工单不会真正发送通知；
3.  测试工单中涉及的外部系统调用：

由表单中发起的，如获取选项、表单校验等，将正常调用；

由服务端发起的，其中触发器、待办同步等，将不会调用；对自动原子，当工单运行到自动原子时，需要您手动设置外部系统返回的数据，来保证必要的流程流转条件；

1.  测试工单发起的子流程表单、新建关联单，也适用以上规则；
2.  测试内容不会保存，退出后您需要重新发起测试。

流程测试工单提交后，不管各节点设置的处理人是谁，在工单的日志中会显示当前进行流程测试的用户，如果流程中包含子流程，则对应的子流程也会生成一张测试工单。

**注：流程测试的工单详情页面被关闭后将会无法再被查看。**

#### 流程导入导出

1.  **流程导出**

在流程设计板块，可以点击每个流程后的导出按钮，或者选择多个流程后点击“批量导出”按钮，可以导出对应的流程文件。

1.  **流程导入**

当需要导入流程时，点击流程设计板块中的“导入”按钮，如下图所示。

导入时支持两种导入方式：

- 新增导入：导入成功后，系统将自动创建全新的完整的流程套件，包含关联的表单模型、数据表、决策表、数据字典及动作配置。比如导入流程 A，如果每次都选择新增导入的方式，则该系统中会有多个流程 A 及其关联的流程套件。
- 克隆导入：导入成功后，系统将克隆原流程套件（含关联的表单模型、数据表、决策表、数据字典及动作配置）。若修改原流程后再次克隆导入，仅新增的流程套件会被导入；已修改的关联组件需手动更新，系统不会自动同步。比如导入流程 A，如果每次都选择克隆导入，则系统中只会有一个流程 A，每次导入时，如果绑定了新增的流程套件，将会跟随导入，但是如果对原套件进行了修改，则修改的部分不会被导入，需要手动在环境中修改。

1.  **流程版本导入导出**

点击流程的“流程版本管理”菜单，可以查看到当前流程的所有版本，每个版本都支持导出。

导入版本时仅支持导入同流程内的版本。若流程版本关联的套件（如表单模型、数据表、决策表、数据字典、动作等）存在修改，需手动调整同步。

### 触发器

流程触发器是在工作流中自动执行特定操作的机制。当特定事件发生或条件满足时，流程触发器会被激活，从而启动一个或多个相关的动作。这些动作可能是发送通知、更新数据库记录、创建新任务等。

#### 触发器配置

点击触发器列表右上角“新增”按钮创建触发器，填写信息

- 基础信息：名称、描述
- 触发事件：设置什么事件触发该触发器生效，如创建工单、更新工单。并且可以设置生效流程的范围
- 触发条件：配置触发器额外的生效条件，满足什么条件的时候触发器生效。

在配置条件中选择变量的时候，变量的可选范围和触发事件中配置的流程生效范围相关，如流程生效范围选的多个表单模型/流程，则只能引用系统变量，如流程生效范围选择的单个表单模型/流程，则可以选择模型/流程中的自定义变量

- 响应动作：配置满足触发事件和条件时，需要执行的动作，这里可选的动作是平台管理/集成中心/动作管理中的动作。选择对应的动作之后，会自动列出动作执行需要的输入参数，输入参数的配置可以自定义输入，也可以引用变量
- 其他说明：触发器的执行是异步执行，不会卡住工单的执行。

#### 触发器使用

触发器配置完成后，当满足触发事件和条件的时候，就会自动触发执行动作，无需手动操作。触发器执行后，在具体的工单详情页可以看到相关的执行记录

### 状态管理

工单状态管理模块用于配置工单从创建到关闭整个生命周期的状态流转逻辑，系统提供的内置的状态模型，同时也支持用户自定义状态和流转规则，可以根据需求进行配置。

#### 配置状态模型

- 基础信息：基础信息有名称、描述和表单模型的设置
    - 其中表单模型和状态模型是一对一的关系，（如果选择表单模型时看不到相关的模型，则可能代表该表单模型已经绑定了其他的状态模型）
    - 如果某个流程未绑定表单模型或绑定的表单模型没有配置对应的状态模型，那系统会自动使用内置的默认状态模型
- 状态列表：定义状态值。系统内置了草稿、处理中、挂起、已完成、终止几个状态，若需要其他状态可以点击“新增”进行自定义。
- 自动流转：用于设置状态的自动流转规则，当规则冲突时，会以顺序值小的为准，工单内置了基础的几个状态流转逻辑如下：
    - 草稿：保存为草稿的单据状态为“草稿”
    - 处理中：工单在流转过程中到达其他节点正常进行处理的为“处理中”状态
    - 挂起：对工单进行了“挂起”操作后，工单状态变为“挂起”状态。工单恢复之后状态回到挂起之前的状态
    - 已完成：工单正常流转完成或者手动关闭后，工单状态变为“已完成”
    - 终止：对工单进行了“终止”操作后，工单状态变为“终止”状态

💡注意：

1.  结束状态：结束状态流程不会继续流转，并且表单字段均为只读状态，除非重新打开单据
2.  添加流转规则时注意优先级顺序和逻辑的合理性，比如避免出现工单结束时还修改状态为处理中这种规则

#### 工单状态展示

在工单列表或工单详情左上角可以看到当前工单的状态

### 阶段管理

工单阶段管理模块可以把复杂流程的节点通过阶段管理起来，在流程流转的过程中可以清晰的看到目前到达哪个阶段，会给用户比较好的体验。

#### 阶段模型配置

1、创建阶段模型

点击阶段模型列表右上角“新增”按钮创建触发器，填写信息

- 基础信息：名称、描述
- 阶段列表：定义阶段值，该阶段模型中需要包含哪些阶段

1.  流程绑定阶段模型

在流程设计第三步，点击“阶段管理”，进行流程阶段绑定。

选择对应的阶段模型后，该模型中所包含的阶段会自动铺列出来，在对应的阶段后面选择流程中的节点，进行绑定即可。

#### 阶段使用

流程阶段绑定完成后，当使用该流程进行创建工单后，工单详情页面上会展示当前阶段的进展。

## 视图管理

### 菜单管理

菜单管理模块用于编排整个系统的菜单，系统提供了一个内置的默认菜单，同时支持自定义新菜单。

1.  **新增菜单**

可以点击右上角新增按钮进行新增菜单，也可以选择一个已有的菜单复制后编排。

**2、编排菜单**

点击编辑进入菜单编辑页，从左侧“可选视图列表”中的视图中，勾选需要的视图，即可添加到右边菜单目录编排区域，添加后可以进行拖拽调整位置

1.  **新增目录**

点击菜单编排区右上角的“新增”按钮，可以新增一个目录，然后把对应的视图拖入到该目录下

1.  **启用菜单**

菜单设置好之后，点击“启用”，即可立即启用该新菜单（一个门户只能有一个启用中的菜单）。

## 集成中心

### 数据表

数据表模块用于维护一些和 ITSM 相关的业务数据，以便于在流程中使用

#### 数据表配置

1、在数据表列表页，点击右上角新增按钮，进入数据表配置页面

2、在数据表配置页面，填写数据表名称和描述，然后点击新增字段，进行数据表的字段配置，配置完成进行保存即可

1.  点击列表的数据表名称，进入数据表的数据管理页面，进行数据的维护

#### 数据表使用

1.  表单数据联动

数据表可以用于表单数据的联动配置，可以根据表单中某几个字段的值的填写查询出数据表中其他相关信息自动填入。

使用方法详见本文档**“平台管理/流程管理/流程设计/表单设计/数据联动设置”**中的数据表联动配置介绍

1.  选择类字段数据来源

表单模型、决策表、流程表单中选择类字段的数据源来源于数据表时，选项设置方式选择“数据表字段值”，进行配置即可

### 动作管理

动作管理模块用于统一管理和第三方系统的对接。在流程中通过自动节点或通过触发器模块实现一些自动化场景。

#### 动作配置

1、在动作管理列表页，点击右上角新增按钮，进入动作配置页面

1.  在动作配置页面，填写动作名称和描述，然后选择动作类型（目前支持 Python、api 和服务动作三种），进行输入/输出参数的配置即可

其中**Python 脚本类型**

上传 Python 文件后，自动解析出输入输出参数。

需要定义该 Python 脚本对应的数据协议，支持以下两种类型：

- 自定义：自定义输入输出参数
- 数据字典：基于特定的数据格式要求定义，请注意，级联类型的字段仅支持引用该类型的动作作为数据源。

**API 类型**

API 类型的动作，对接的是平台的 APIGetway 中的数据，需要手动配置输入输出参数。

- 数据协议：
- 支持以下两种类型：
    - 自定义：自定义输入输出参数
    - 数据字典：基于特定的数据格式要求定义，请注意，级联类型的字段仅支持引用该类型的动作作为数据源
- 自定义：自定义输入输出参数
- 数据字典：基于特定的数据格式要求定义，请注意，级联类型的字段仅支持引用该类型的动作作为数据源。
- 执行人：资源（API）的调用用该执行人的身份，需要确保执行人有对应的资源权限
- 执行方式：执行方式有同步和异步两种，异步动作只能在流程的自动节点中使用，其他地方不可以使用
    - 同步：动作发起后主动等执行完之后直接获取到输出参数
    - 异步：动作发起后，需要被调用方通过回调地址主动回调传回输出参数
- 回调地址：执行方式为异步时，自动生成回调地址，用于被回调返回输出参数
- 超时时长：执行方式为异步时，如果超时未回调，则可由自动节点处设置的紧急处理人手动写入输出参数

**服务动作**

服务动作是对接平台提供的动作原子能力，从平台动作服务中拉取动作列表。平台动作提供从开发、联调到部署集一体的动作式插件开发底层能力。服务动作的开发说明详见平台服务动作的说明。

需要定义该服务动作对应的数据协议，支持以下两种类型：

- 自定义：自定义输入输出参数
- 数据字典：基于特定的数据格式要求定义，请注意，级联类型的字段仅支持引用该类型的动作作为数据源。

#### 动作使用

动作的使用场景有以下四个：

1.  **流程中的自动节点**

自动节点用于不需要人工干预的，可以由系统自动执行的任务节点。通常用于执行一些预定义的、重复性的或者无需用户决策的工作。

使用方法详见本文档**“平台管理/流程管理/流程设计/流程节点介绍”**中的动作节点介绍

1.  **表单数据联动**

数据联动的数据源来源于外部系统时，可以通过动作管理模块将对应接口接入，通过动作联动来配置实现

使用方法详见本文档**“平台管理/流程管理/流程设计/表单设计/数据联动设置”**中的动作联动配置介绍

1.  **选择类字段数据来源**

表单模型、决策表、流程表单中选择类字段的数据源来源于外部系统时，可以通过动作管理模块将对应的接口接入，通过字段引用

选择类字段的选项设置方式选择“引用动作”，进行配置即可

**4、触发器触发动作执行**

流程触发器是在工作流中自动执行特定操作的机制。当特定事件发生或条件满足时，流程触发器会被激活，从而启动一个或多个相关的动作。这些动作可能是发送通知、更新数据库记录、创建新任务等。

使用方法详见本文档**“平台管理/流程管理/触发器”**中的介绍

## 通知管理

### 通知规则

通知规则模块用于配置工单生命周期中的消息通知规则，主要目的是确保相关方能够及时、准确地接收到关于工单相关的消息

#### 内置通知规则

平台内置了常用的通知规则，进入详情页配置通知渠道，然后启用即可。如需修改其他配置，也可以进行修改。

内置通知说明：

|     |     |     |
| --- | --- | --- |
| 通知名称 | 触发事件 | 通知对象 |
| 工单结束通知 | 工单结束后通知 | 提单人 |
| 挂起工单通知 | 工单挂起后通知 | 提单人 |
| 恢复工单通知 | 工单挂起恢复后通知 | 提单人 |
| 评论工单通知 | 工单评论中@用户通知 | 被@的用户 |
| 退回工单通知 | 工单退回后通知 | 撤回后当前工单的处理人 |
| 撤回工单通知 | 工单撤回后通知 | 退回后当前工单的处理人 |
| 创建工单通知 | 工单创建后通知 | 提单人 |
| 待办工单通知 | 有新待办时通知 | 工单新增的处理人 |

#### 通知规则配置

如果有其他的通知需求，可以自定义新的通知规则。

点击通知规则列表右上角“新增”按钮创建通知规则，填写信息保存后，启用即可

- 基础信息：名称、描述
- 触发事件：设置什么事件触发该通知规则生效，如创建工单、退回工单、撤回工单等。并且可以设置生效流程的范围
- 触发条件：配置通知规则额外的生效条件，满足什么条件的时候通知规则生效
- 通知对象：谁可以收到该通知
- 通知渠道：通过什么渠道发送通知，如邮件、微信（这里的通知渠道是和平台对接的）
- 通知内容：发送通知的具体内容

#### 通知规则使用

通知规则配置完成并启用后，当规则匹配的时候，就会自动发送通知，无需手动操作。

## 应用中心

应用中心模块用于统一管理 ITSM 系统的相关应用。包括应用的安装/卸载、启/停等。

平台提供插件化的扩展开发框架，可以通过插件开发满足客户的个性化需求。支持组件级（如表单字段、门户组件）、应用级（如事件管理、变更管理应用）插件扩展开发。

### 应用详情

进入应用详情页面，可以看到应用的功能简介、相关资料、依赖说明等信息

### 应用安装

应用的安装/卸载只能在默认门户进行操作，在默认门户进行安装/卸载某应用之后，该应用会在所有门户同步安装/卸载。

注：不同门户的同一个应用中的数据是隔离的（工单数据除外）

1.  点击“安装”按钮，安装对应的应用，应用安装成功即可使用
2.  应用插件安装后，应用自带的所有视图会自动安装，可以在平台管理/视图菜单/视图列表中看到对应的视图（只有应用应用才会自带视图，其他应用如字段应用安装后直接在表单设计时可以看到对应的字段）
3.  可以在菜单管理中，把需要的视图添加到菜单里并启用菜单即可

### 应用卸载

应用的安装/卸载只能在默认门户进行操作，在默认门户进行安装/卸载某应用之后，该应用会在所有门户同步安装/卸载。

点击“卸载”按钮，即可卸载对应的应用。

应用卸载只做了视图的删除，没有做数据的删除，应用卸载之后：

- 所有的视图会自动删除
- 再次安装应用后，所有的数据会自动恢复

### 应用启停

如果某门户无需使用该应用，可以去对应的门户下进行启/停。应用启/停不会影响其他门户，只对当前门户生效。

应用停用只做了视图的删除，没有做数据的删除，应用停用之后：

- 所有的视图会自动删除
- 再次启用应用后，所有的数据会自动恢复

### 轻应用创建和使用

轻应用是系统提供的基于数据表的轻量级应用。提供了数据的增删改查的维护能力。

轻应是门户隔离的，在 A 门户中创建一个轻应用，在 B 门户中不会出现。

1、点击应用管理右上角”创建轻应用“按钮，进行轻应用的创建

1.  轻应用创建成功后，在视图列表中会看到对应轻应用下的视图（当前轻应用只提供了数据表视图）
2.  在菜单管理中把应用对应的视图添加进来，启用菜单，即可使用轻应用的数据表视图
3.  在轻应用的数据表视图中，可以进行数据表的创建

数据表的创建和使用方式详见**平台管理/集成中心/数据表**模块的详细介绍

### 集成应用的创建和使用

支持集成应用通过页面方式上传，支持上传多个集成应用；结合平台化架构，便捷的横向结合多种集成场景；

支持对上传的应用进行禁用启用配置，支持查看详情，卸载，并且具有“管理应用”页签，可以上传代码包

1、点击应用管理右上角”创建集成应用“按钮，进行集成应用的创建，集成应用创建后不能被删除

2、创建集成应用后，可在应用集市中看到对应的应用卡片，点击“应用管理”上传代码包

1.  上传代码包后可点击“配置”按钮，配置该集成应用的参数，具体参数由系统解析上传的代码包后在显示在配置管理
2.  点击“详情”按钮查看集成应用的功能简介，相关资料，依赖说明以及关联应用等信息
3.  在集成应用的代码包上传后，即可对应用进行“安装”和“卸载”操作，并且对已经安装的应用进行“启用”和“停用”操作；

## 组织管理

### 用户组管理

用户组是一组用户的集合，用户组管理模块用于用户组的创建和统一管理。

#### 新增用户组

在左侧的用户组分类中选择一个叶子节点，点击右侧用户组列表右上角“新增”按钮创建用户组，填写信息保存后，启用即可。

- 用户组分类：用户组所在的分类，对应该页面左侧的分类树
- 用户组标签：给该用户组打标签，标签在数据字典内置的“用户组标签”字典中进行维护

用户组创建成功后，可以点击列表的用户组名称进入用户组详情页，查看用户组的详细信息

#### 修改用户组

进入用户组详情页，进行基础信息和用户组成员的修改

- 基础信息：鼠标悬浮在对应字段处，出现，点击图标进行修改
- 用户组成员：点击成员列表右上角“添加成员”按钮进行成员的新增，点击成员列表后面的“移除”按钮删除成员

#### 用户组启停

在用户组列表上可以通过启停按钮控制用户组的启停。

用户组停用之后：

- 在前台涉及到选择用户组的地方会看不到停用的用户组
- 若流程中配置了已经停用的用户组，工单任务还是会继续派发，如果不需要派发给停用的用户组，需要自行进入流程中进行修改

#### 删除用户组

在用户组列表点击“删除”按钮即可进行删除

删除用户组之前，要先停用对应的用户组，启用中的用户组不支持删除。

### VIP 管理

VIP 管理是用于管理组织内的 VIP 用户，在 VIP 列表中的人员字段可以在工单表单或工单列表展示 VIP 标识，可以进行单据优先处理。

1、在 VIP 管理页面中，点击右上角的“添加用户”按钮，添加 VIP 用户

2、在具体的流程设计中的第三步“流程设置”中，设置需要展示 VIP 标识的人员字段

3、配置好 VIP 标识之后，将在工单列表和工单详情中对应字段的 VIP 用户旁显示 VIP 标识。

## 全局配置

### 基础配置

系统中一些基础的配置统一在该模块下进行配置。

1.  **更新用户和组织：**

用于更新系统中的用户和组织信息

后台每天凌晨 0 点会更新一次用户和组织信息；

每 5000 用户大约需要 1min 左右时间，请勿频繁点击【更新】按钮。

1.  **产品 logo 配置：**

用于配置产品导航栏左上角显示的产品 logo 和产品名称；

点击【更改配置】按钮，可上传产品 logo 以及更改产品名称；点击【恢复默认】按钮则会将产品 logo 和产品名称恢复为默认的 logo 和名称；

1.  **浏览器页签标识**

用于配置浏览器页签上的图标和名称，修改之后请手动刷新浏览器查看最新效果；

点击【更改配置】按钮，可上传页签图标以及页签名称；点击【恢复默认】按钮则会将产品 og 和产品名称恢复为默认的 logo 和名称；

1.  **附件类型配置：**

配置系统中涉及附件上传的功能所支持的附件类型

新增附件类型在输入框中写入“.xxx”（注意要加前缀“.”），回车即可添加，然后点击保存

1.  **用户信息配置：**

配置系统中用户信息的展示

- 列表用户信息展示：在各种列表中的人员信息展示
- 工单详情用户信息展示：在工单详情中的人员信息卡片的展示
- 用户选择组件用户信息展示：在所有涉及到用户选择组件处的用户信息展示

1.  **移动端配置**

用于对移动端进行个性化设置

1、工单列表卡片信息配置：用于配置移动端工单列表卡片中展示的字段；

2、工单详情基础信息配置：用于配置移动端工单详情页中展示的工单基础信息字段；

### 数据字典

数据字典用于维护工单中选择类字段的数据源，把具有复用性的数据在数据字典进行统一维护管理（如事件分类、事件来源等），保证数据的标准化和一致性，并且可以减少管理工作量，提高流程设计效率。

#### 数据字典配置

**1、新增数据字典**

点击数据字典列表右上角“新增”按钮创建数据字典，填写信息保存后，启用即可。

数据字典也可以支持层级数据的维护，供级联字段使用

1.  **导入数据字典**

也可以通过导入的方式导入数据字典。导入的文件格式为 JSON，相当于可以把本系统中导出的数据字典文件进行导入

#### 数据字典使用

在流程表单设计的时候，选择类字段的选项来源可以选择数据字典，即可从数据字典中选择。

可使用数据字典作为选项来源的字段类型有：单/多选下拉，单/多选框，单/多选级联选择器

### 流程类型

流程类型指的是不同种类的流程。流程类型配置如下：

1.  在流程类型页面点击“新增”按钮，填写类型名称和单号前缀，保存后流程类型则新增成功

工单编号的逻辑说明：

- 格式为:前缀+日期+8 位序号，如：INC2024061700000001
- 编号后 8 位序号是按流程类型和门户隔离的，同一门户同一类型的工单编号后 8 位序号会每天从 1 开始递增

2、在设计流程的时候，需要选择一个流程类型。后续用该流程提单时，对应的单号前缀则与该类型设置的前缀匹配

1.  在工单中心创建工单时，左侧分类也是按流程类型进行的分类

### 门户配置

ITSM 提供门户配置功能，可以支持创建多个门户。"多门户"是指为不同用户群体或角色提供定制化访问入口的概念。每个门户都是为特定的用户群体设计的，以满足他们的特定需求和偏好。多门户的目的是提供更加个性化和高效的用户体验，确保用户能够轻松访问与他们相关的信息和服务。

#### 门户配置

点击门户配置列表右上角“新增”按钮创建新门户，填写信息保存后，启用即可。

创建一个门户后，会在权限中心自动创建一个分级管理空间，点击”权限配置“跳转至权限中心，进入该门户的分级管理空间

在分级管理空间中，可以配置该门户的管理员、授权人员和最大授权边界

关于权限中心的详细使用说明，可查看权限中心的用户手册

门户管理员在权限中心左上角切换至对应的门户管理空间，可以进行该门户下的用户组、权限模板的配置，同时还可以创建该空间下的二级管理空间。

#### 门户使用

门户配置完成后，用户只要有该门户的可见范围权限，就可以在产品首页左上角进行切换门户查看

#### 门户数据

不同门户下的数据除工单数据和 VIP 用户列表外，其他数据都是按门户进行隔离的

### 工单分组

#### 工单分组配置

管理员可以在后台的工单分组模块对用户进行统一配置初始化工单分组。

1.  新增分组目录

左侧是工单分组目录的维护，点击可以新增分组目录。

设置时可以选择该分组所属应用，即设置哪些应用下可见当前该分组。

1.  新增分组

在对应的分组目录下点击”新增分组“按钮，进行新分组的创建

新增分组时，可以设置当前分组的类型、分组适用的范围及条件，以及默认工单列表展示的字段

1.  添加分组到目录

创建完成分组后，在分组配置中勾选对应的分组，添加到“已选分组”中

1.  分组权限配置

可以通过可见范围的配置，控制分组的可见权限，范围内的用户才能看到该分组目录下的分组。

#### 工单分组使用

管理员配置完工单分组后，有权限的用户即可在工单中心看到对应的分组。

工单分组是对用户已经有查看权限的工单进行分组，所以同一个分组下，不同用户可见的工单数据可能有所不同，依赖工单的查看权限

若新增分组的条件是基于同一个流程或者同一个表单模型设置的，还可以配置把流程字段或者表单模型的字段展示在列表

个人用户也可以点击工单分组旁边的设置按钮，自定义工单分组。若不想要管理员设置的初始化分组，可以进行停用。

### 多语言配置

一、环境变量

|     |     |     |     |     |
| --- | --- | --- | --- | --- |
| **环境变量** | **是否必须** | **释义** | **默认值** | **示例** |
| BKAPP_LANGUAGE_CODE | 否   | 本地语言 | zh-hans | 可选值：en【英文】,zh-hans【简体中文】,zh-hant【繁体中文】 |

首次部署时根据环境变量设置默认语言模式

二、多语言配置

1、适配场景：

用户在个人中心-个性设置-设置系统语言，进行语言切换，需要进行静态数据（菜单目录、导航栏）和动态数据（流程管理、工单分组）两类数据切换。

2、配置操作

静态数据：访问平台管理-全局配置-多语言配置，录入各菜单目录的中文繁体、英文

动态数据：

1、流程管理

点击流程名称-编辑流程信息弹框右上角点击多语言-填入流程名称的中文繁体、英文

流程配置-表单设计阶段点击表单字段右侧-多语言-录入每项字段的中文繁体、英文

流程配置-流程设计阶段点击流程节点-录入节点名称、操作按钮的中文繁体、英文

2、工单分组

访问平台管理-全局配置-工单分组，点击各工单分组编辑标识

录入各工单分组的中文繁体、英文，**内置的工单分组默认已录入中文繁体、英文，新增的工单分组需要自行录入**

## 个性设置

### 工单代理管理

有权限的用户可以在”工单代理管理“模块中帮其他用户设置授权的代理处理工单的用户，点击”平台管理-个性设置-工单代理管理“中可以进行设置。

点击“添加授权”按钮，可以填写授权信息，需要填写的内容说明如下：

- 创建人：即谁创建该条授权记录，默认为当前用户；
- 代理对象：即选择需要为谁创建代理人，单选；
- 授权代理人：即工单被委托人，接收代理对象的委托，可对代理对象在委托流程/服务范围内的待办工单进行查看、处理，可多选。比如如果代理对象为张三，授权代理人为李四，则授权成功后，处理人为张三的工单，李四也具有处理权限；
- 授权代理服务：授权代理人可以代为处理的服务项，如果不选择，则默认为代理对象可处理的全部服务；
- 授权代理流程：授权代理人可以代为处理的流程，如果不选择，则默认为代理对象可处理的全部流程；
- 授权代理时间：授权代理人被授权处理的时间段，如果不选择，则默认为永久有效。

当授权成功后，可以在授权日志中查看到授权记录，如下图所示。

## 权限管理

ITSM 产品的权限是对接蓝鲸权限中心的，在权限中心进行相关模块和功能的授权即可。建议用户按照权限中心最佳实践“分级管理员+权限模板+用户组”的模式进行权限的管理

第一步：以权限中心的超级管理员创建分级管理空间（建议使用分级管理员对应 ITSM 的门户管理员，在 ITSM 中创建门户的时候，会自动创建一个分级管理空间）

第二步：由超级管理员/分级管理员创建权限模板

第三步：创建用户组，并将用户添加到权限中心对应的用户组中
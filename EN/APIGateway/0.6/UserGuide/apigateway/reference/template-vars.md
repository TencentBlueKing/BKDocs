# 资源模板变量

## 使用模板变量

网关资源『后端配置』中的『Path』支持使用模板变量。

网关请求后端接口时，会对后端配置 Path 中的变量进行替换，再进行请求。

### 模板变量来源

- **路径变量：** 网关资源『前端配置』『请求路径』中包含的 `{var_name}` 即为路径变量，『后端配置』『Path』中可使用 `{var_name}` 获取该变量
- **环境变量：** 即网关环境中定义的环境变量，使用时，添加统一前缀 env，通过 `{env.var_name}` 获取变量内容

### 使用示例

#### 路径变量示例

网关资源后端配置 Path 中，使用前端配置请求路径中的部分数据，可以使用路径变量实现，比如：

前端配置请求路径为：/get/tasks/{task_id}/

后端配置 Path 定义为：/get/tasks/{task_id}/，使用路径变量 {task_id}

则请求 /get/tasks/12345/ 时，网关实际请求的后端接口地址为 /get/tasks/12345/，后端配置 Path 中的 {task_id} 替换成了请求路径中相应的值

#### 网关环境变量示例

网关资源后端配置 Path 中，不同网关环境子路径不同，可以使用网关环境变量实现，比如：

在网关环境中定义变量：subpath = bkapp-prod

后端配置 Path 定义为：/{env.subpath}/get/tasks/12345/

则网关实际请求的后端接口地址为 /bkapp-prod/get/tasks/12345/，目标地址中的 {env.subpath} 被替换成了网关环境变量中相应的值
